[{"filePath":"/Users/williamseemueller/workspace/di-framework/eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/bin/cmd/build.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/bin/cmd/publish.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/bin/cmd/test.ts","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":5,"column":1,"messageId":"tsIgnoreInsteadOfExpectError","endLine":5,"endColumn":62,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[131,192],"text":"// @ts-expect-error — static import embeds the file at compile time"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { $ } from 'bun';\nimport { join } from 'path';\nimport { writeFileSync, unlinkSync } from 'fs';\nimport { tmpdir } from 'os';\n// @ts-ignore — static import embeds the file at compile time\nimport E2E_SCRIPT from '../scripts/e2e-test.sh' with { type: 'text' };\n\nexport async function test() {\n  const tmp = join(tmpdir(), `di-framework-e2e-${process.pid}.sh`);\n  writeFileSync(tmp, E2E_SCRIPT, { mode: 0o755 });\n  try {\n    await $`bash ${tmp}`.env(process.env);\n  } finally {\n    unlinkSync(tmp);\n  }\n}\n\nif (import.meta.main) {\n  test().catch((err) => {\n    console.error('Tests failed:', err);\n    process.exit(1);\n  });\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/bin/cmd/typecheck.ts","messages":[{"ruleId":"no-control-regex","severity":1,"message":"Unexpected control character(s) in regular expression: \\x1b.","line":62,"column":20,"messageId":"unexpected","endLine":62,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env tsx\n\nimport ts from 'typescript';\nimport path from 'node:path';\nimport process from 'node:process';\n\ntype Args = {\n  tsconfigPath?: string;\n  pretty: boolean;\n  from: 'cwd' | 'script';\n};\n\nexport function parseArgs(argv: string[]): Args {\n  let tsconfigPath: string | undefined;\n  let pretty = process.stdout.isTTY;\n  let from: Args['from'] = 'cwd';\n\n  for (const arg of argv.slice(2)) {\n    if (arg.startsWith('--pretty=')) {\n      pretty = arg.split('=')[1] !== '0';\n      continue;\n    }\n    if (arg.startsWith('--from=')) {\n      const v = arg.split('=')[1];\n      if (v === 'cwd' || v === 'script') from = v;\n      continue;\n    }\n    if (!arg.startsWith('-') && !tsconfigPath) {\n      tsconfigPath = arg;\n    }\n  }\n\n  return { tsconfigPath, pretty, from };\n}\n\n/**\n * Find the *highest* (topmost) tsconfig.json above a starting directory.\n * This is handy for monorepos where each package may have its own tsconfig.json\n * but you want the repo root solution config.\n */\nexport function findTopmostTsconfig(startDir: string): string | undefined {\n  let dir = path.resolve(startDir);\n  let lastFound: string | undefined;\n\n  while (true) {\n    const candidate = path.join(dir, 'tsconfig.json');\n    if (ts.sys.fileExists(candidate)) lastFound = candidate;\n\n    const parent = path.dirname(dir);\n    if (parent === dir) break; // reached filesystem root\n    dir = parent;\n  }\n\n  return lastFound;\n}\n\nfunction formatDiagnostic(d: ts.Diagnostic, host: ts.FormatDiagnosticsHost): string {\n  return ts.formatDiagnosticsWithColorAndContext([d], host);\n}\n\nfunction stripAnsi(s: string) {\n  return s.replace(/\\u001b\\[[0-9;]*m/g, '');\n}\n\nexport async function typecheck() {\n  const args = parseArgs(process.argv);\n\n  // Start search either from where you run it, or from where the script lives.\n  const startDir =\n    args.from === 'script'\n      ? path.dirname(path.resolve(process.argv[1] ?? process.cwd()))\n      : process.cwd();\n\n  const tsconfigPath = args.tsconfigPath\n    ? path.resolve(process.cwd(), args.tsconfigPath)\n    : findTopmostTsconfig(startDir);\n\n  if (!tsconfigPath) {\n    console.error(\n      '❌ Could not find tsconfig.json. Pass a path as the first argument, or run with --from=script.',\n    );\n    process.exit(2);\n  }\n\n  const cwd = process.cwd();\n\n  const configFileText = ts.sys.readFile(tsconfigPath);\n  if (!configFileText) {\n    console.error(`❌ Failed to read tsconfig: ${tsconfigPath}`);\n    process.exit(2);\n  }\n\n  const configJson = ts.parseConfigFileTextToJson(tsconfigPath, configFileText);\n  if (configJson.error) {\n    console.error('❌ Failed to parse tsconfig.json:');\n    const msg = ts.formatDiagnosticsWithColorAndContext([configJson.error], {\n      getCanonicalFileName: (f) => f,\n      getCurrentDirectory: () => cwd,\n      getNewLine: () => ts.sys.newLine,\n    });\n    console.error(args.pretty ? msg : stripAnsi(msg));\n    process.exit(2);\n  }\n\n  const parsed = ts.parseJsonConfigFileContent(\n    configJson.config,\n    ts.sys,\n    path.dirname(tsconfigPath),\n    undefined,\n    tsconfigPath,\n  );\n\n  if (parsed.errors.length) {\n    console.error('❌ tsconfig parsing produced diagnostics:');\n    const host: ts.FormatDiagnosticsHost = {\n      getCanonicalFileName: (f) => f,\n      getCurrentDirectory: () => cwd,\n      getNewLine: () => ts.sys.newLine,\n    };\n    for (const d of parsed.errors) {\n      const msg = formatDiagnostic(d, host);\n      console.error(args.pretty ? msg : stripAnsi(msg));\n    }\n    process.exit(2);\n  }\n\n  const formatHost: ts.FormatDiagnosticsHost = {\n    getCanonicalFileName: (f) => f,\n    getCurrentDirectory: () => cwd,\n    getNewLine: () => ts.sys.newLine,\n  };\n\n  const files = new Map<string, { version: number; text?: string }>();\n  for (const f of parsed.fileNames) files.set(path.resolve(f), { version: 0 });\n\n  const servicesHost: ts.LanguageServiceHost = {\n    getCompilationSettings: () => parsed.options,\n    getCurrentDirectory: () => cwd,\n    getDefaultLibFileName: (options) => ts.getDefaultLibFilePath(options),\n\n    getScriptFileNames: () => Array.from(files.keys()),\n    getScriptVersion: (fileName) => String(files.get(path.resolve(fileName))?.version ?? 0),\n    getScriptSnapshot: (fileName) => {\n      const abs = path.resolve(fileName);\n      const cached = files.get(abs);\n      if (cached?.text !== undefined) return ts.ScriptSnapshot.fromString(cached.text);\n\n      const text = ts.sys.readFile(abs);\n      if (text === undefined) return undefined;\n\n      if (cached) cached.text = text;\n      else files.set(abs, { version: 0, text });\n\n      return ts.ScriptSnapshot.fromString(text);\n    },\n\n    fileExists: ts.sys.fileExists,\n    readFile: ts.sys.readFile,\n    readDirectory: ts.sys.readDirectory,\n    directoryExists: ts.sys.directoryExists,\n    getDirectories: ts.sys.getDirectories,\n    realpath: ts.sys.realpath,\n    useCaseSensitiveFileNames: () => ts.sys.useCaseSensitiveFileNames,\n    getNewLine: () => ts.sys.newLine,\n  };\n\n  const languageService = ts.createLanguageService(servicesHost, ts.createDocumentRegistry());\n\n  const all: ts.Diagnostic[] = [];\n  all.push(...languageService.getCompilerOptionsDiagnostics());\n  for (const fileName of servicesHost.getScriptFileNames()) {\n    all.push(...languageService.getSyntacticDiagnostics(fileName));\n    all.push(...languageService.getSemanticDiagnostics(fileName));\n  }\n\n  const errors = all.filter((d) => d.category === ts.DiagnosticCategory.Error);\n  const warnings = all.filter((d) => d.category === ts.DiagnosticCategory.Warning);\n\n  // Small banner so you can tell which config actually drove the check.\n  console.log(`ℹ️ Using tsconfig: ${tsconfigPath}`);\n  console.log(`ℹ️ Checking ${servicesHost.getScriptFileNames().length} file(s)`);\n\n  if (all.length) {\n    const sorted = [\n      ...errors,\n      ...warnings,\n      ...all.filter(\n        (d) =>\n          d.category !== ts.DiagnosticCategory.Error &&\n          d.category !== ts.DiagnosticCategory.Warning,\n      ),\n    ];\n    for (const d of sorted) {\n      const msg = formatDiagnostic(d, formatHost);\n      console.error(args.pretty ? msg : stripAnsi(msg));\n    }\n  }\n\n  if (errors.length) {\n    console.error(`❌ Typecheck failed: ${errors.length} error(s).`);\n    process.exit(1);\n  }\n\n  console.log(\n    `✅ Typecheck passed (${warnings.length ? `${warnings.length} warning(s)` : 'no warnings'}).`,\n  );\n  process.exit(0);\n}\n\nif (import.meta.main) {\n  typecheck().catch((err) => {\n    console.error('❌ Fatal error while running typecheck:', err);\n    process.exit(2);\n  });\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/bin/main.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/bin/tests/build.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/bin/tests/publish.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/bin/tests/test.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/bin/tests/typecheck.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework-http/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework-http/src/cli.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework-http/src/cli.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":35,"column":21,"messageId":"unexpectedAny","endLine":35,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1076,1079],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1076,1079],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"#!/usr/bin/env bun\nimport fs from 'fs';\nimport path from 'path';\nimport { generateOpenAPI } from './openapi.ts';\nimport registry from './registry.ts';\n\nconst args = process.argv.slice(2);\nconst command = args[0];\n\nif (command === 'generate') {\n  const outputArg = args.indexOf('--output');\n  const outputPath = outputArg !== -1 ? args[outputArg + 1] : 'openapi.json';\n\n  const controllersArg = args.indexOf('--controllers');\n  if (controllersArg === -1) {\n    console.error('Error: --controllers path is required');\n    process.exit(1);\n  }\n\n  async function run() {\n    try {\n      // Import the user's controllers to trigger decorator registration\n      const controllersPathResolved = path.resolve(process.cwd(), args[controllersArg + 1]!);\n      await import(controllersPathResolved);\n\n      const spec = generateOpenAPI(\n        {\n          title: 'API Documentation',\n        },\n        registry,\n      );\n\n      fs.writeFileSync(outputPath!, JSON.stringify(spec, null, 2));\n      console.log(`Successfully generated OpenAPI spec at ${outputPath}`);\n    } catch (error: any) {\n      console.error(`Error generating OpenAPI spec: ${error.message}`);\n      process.exit(1);\n    }\n  }\n\n  run();\n} else {\n  console.log(`\nUsage: di-framework-http generate --controllers <path-to-controllers> [options]\n\nOptions:\n  --controllers <path>  Path to a file that imports all your decorated controllers\n  --output <path>       Path to save the generated JSON (default: openapi.json)\n    `);\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework-http/src/decorators.test.ts","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":18,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":18,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[676,689],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":20,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":20,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[746,759],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":22,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":22,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[819,832],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":33,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":33,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[1183,1196],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":35,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":35,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[1250,1263],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":46,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":46,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[1577,1590],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":90,"column":40,"messageId":"unexpectedAny","endLine":90,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2762,2765],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2762,2765],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect } from 'bun:test';\nimport { Controller, Endpoint, SCHEMAS } from './decorators.ts';\nimport registry from './registry.ts';\nimport { useContainer } from '@di-framework/di-framework/container';\nimport { Component } from '@di-framework/di-framework/decorators';\n\ndescribe('Decorators', () => {\n  it('should register a controller and its endpoints', () => {\n    const initialSize = registry.getTargets().size;\n\n    @Controller()\n    class TestController {\n      @Endpoint({ summary: 'Test endpoint' })\n      static test = { isEndpoint: true, path: '/test', method: 'get' };\n    }\n\n    expect(registry.getTargets().has(TestController)).toBe(true);\n    // @ts-ignore\n    expect(TestController.isController).toBe(true);\n    // @ts-ignore\n    expect(TestController.test.isEndpoint).toBe(true);\n    // @ts-ignore\n    expect(TestController.test.metadata.summary).toBe('Test endpoint');\n\n    expect(registry.getTargets().size).toBeGreaterThan(initialSize);\n  });\n\n  it('should work as a class decorator for Endpoint', () => {\n    @Endpoint({ summary: 'Class level' })\n    class ClassEndpoint {}\n\n    expect(registry.getTargets().has(ClassEndpoint)).toBe(true);\n    // @ts-ignore\n    expect(ClassEndpoint.isEndpoint).toBe(true);\n    // @ts-ignore\n    expect(ClassEndpoint.metadata.summary).toBe('Class level');\n  });\n\n  it('should work on instance methods (via prototype)', () => {\n    class InstanceController {\n      @Endpoint({ summary: 'Instance method' })\n      method() {}\n    }\n\n    expect(registry.getTargets().has(InstanceController)).toBe(true);\n    // @ts-ignore\n    expect(InstanceController.prototype.method.isEndpoint).toBe(true);\n  });\n\n  it('should inject static properties on Controller classes', () => {\n    class InjectedService {\n      value = 42;\n    }\n    useContainer().register(InjectedService);\n\n    @Controller()\n    class InjectedController {\n      @Component(InjectedService)\n      static service: InjectedService;\n    }\n\n    expect(InjectedController.service).toBeDefined();\n    expect(InjectedController.service.value).toBe(42);\n  });\n\n  it('should extract schemas from Endpoint metadata and store them via SCHEMAS symbol', () => {\n    class SchemaEndpoint {\n      @Endpoint({\n        responses: {\n          '200': {\n            description: 'A successful response',\n            content: {\n              'application/json': {\n                schema: { $ref: '#/components/schemas/MyModel' },\n              },\n            },\n          },\n        },\n        requestBody: {\n          content: {\n            'application/json': {\n              schema: { $ref: '#/components/schemas/MyRequest' },\n            },\n          },\n        },\n      })\n      static myEndpoint() {}\n    }\n\n    const schemas = (SchemaEndpoint as any)[SCHEMAS];\n    expect(schemas).toBeDefined();\n    expect(schemas.has('MyModel')).toBe(true);\n    expect(schemas.has('MyRequest')).toBe(true);\n    expect(schemas.size).toBe(2);\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework-http/src/decorators.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":72,"messageId":"unexpectedAny","endLine":18,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[644,647],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[644,647],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":21,"column":28,"messageId":"unexpectedAny","endLine":21,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[802,805],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[802,805],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":65,"column":17,"messageId":"unexpectedAny","endLine":65,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2258,2261],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2258,2261],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":66,"column":30,"messageId":"unexpectedAny","endLine":66,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2292,2295],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2292,2295],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":68,"column":28,"messageId":"unexpectedAny","endLine":68,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2330,2333],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2330,2333],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import registry from './registry.ts';\nimport { Container as ContainerDecorator } from '@di-framework/di-framework/decorators';\nimport { getOwnMetadata, useContainer } from '@di-framework/di-framework/container';\n\nconst INJECT_METADATA_KEY = 'di:inject';\nexport const SCHEMAS = Symbol.for('proseva:component-schemas');\n\ntype UnknownRecord = Record<string, unknown>;\n\nfunction isRecord(value: unknown): value is UnknownRecord {\n  return typeof value === 'object' && value !== null && !Array.isArray(value);\n}\n\ninterface ContainerLike {\n  resolve(token: unknown): unknown;\n}\n\nexport function Controller(options: { singleton?: boolean; container?: any } = {}) {\n  // Compose DI registration with OpenAPI registry marking\n  const containerDecorator = ContainerDecorator(options);\n  return function (target: any) {\n    // Mark for HTTP/OpenAPI purposes\n    target.isController = true;\n    registry.addTarget(target);\n\n    // Also register with the DI container (same instance as core framework)\n    containerDecorator(target);\n\n    const container: ContainerLike = (options.container ?? useContainer()) as ContainerLike;\n\n    const rawMetadata: unknown = getOwnMetadata(INJECT_METADATA_KEY, target) as unknown;\n    const injectMetadata: UnknownRecord = isRecord(rawMetadata) ? rawMetadata : {};\n\n    for (const [propName, targetType] of Object.entries(injectMetadata)) {\n      if (!propName.startsWith('param_') && targetType) {\n        (target as UnknownRecord)[propName] = container.resolve(targetType);\n      }\n    }\n  };\n}\n\n/** Extract all `#/components/schemas/<Name>` references from a metadata tree. */\nfunction extractSchemaRefs(obj: unknown, out: Set<string>): void {\n  if (typeof obj !== 'object' || obj === null) return;\n\n  if (Array.isArray(obj)) {\n    for (const item of obj) extractSchemaRefs(item, out);\n    return;\n  }\n\n  for (const [key, value] of Object.entries(obj as Record<string, unknown>)) {\n    if (key === '$ref' && typeof value === 'string') {\n      const match = /^#\\/components\\/schemas\\/(.+)$/.exec(value);\n      if (match?.[1]) out.add(match[1]);\n    } else {\n      extractSchemaRefs(value, out);\n    }\n  }\n}\n\nexport function Endpoint(metadata?: {\n  summary?: string;\n  description?: string;\n  parameters?: unknown[];\n  requestBody?: any;\n  responses?: Record<string, any>;\n}) {\n  return function (target: any, propertyKey?: string) {\n    if (propertyKey) {\n      const property = target[propertyKey];\n\n      // For static methods on a class, target is the constructor.\n      // If it's a static method, target itself is the constructor.\n      const constructor = typeof target === 'function' ? target : target.constructor;\n      registry.addTarget(constructor);\n\n      // We'll let the generator discover the details from the property for now,\n      // or we could register it explicitly here if we had path/method info.\n      // Since TypedRouter adds path/method to the handler, we keep it as is\n      // but we can ensure the metadata is attached.\n      property.isEndpoint = true;\n      if (metadata) {\n        property.metadata = metadata;\n        const existing: Set<string> =\n          (constructor as Record<symbol, Set<string>>)[SCHEMAS] ?? new Set<string>();\n        extractSchemaRefs(metadata, existing);\n        (constructor as Record<symbol, Set<string>>)[SCHEMAS] = existing;\n      }\n    } else {\n      target.isEndpoint = true;\n      if (metadata) {\n        target.metadata = metadata;\n        const existing: Set<string> =\n          (target as Record<symbol, Set<string>>)[SCHEMAS] ?? new Set<string>();\n        extractSchemaRefs(metadata, existing);\n        (target as Record<symbol, Set<string>>)[SCHEMAS] = existing;\n      }\n      registry.addTarget(target);\n    }\n  };\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework-http/src/openapi.test.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":73,"messageId":"unexpectedAny","endLine":7,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[325,328],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[325,328],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":27,"column":10,"messageId":"unexpectedAny","endLine":27,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[953,956],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[953,956],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":37,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":37,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[1309,1322],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":39,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":39,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[1363,1376],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":41,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":41,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[1424,1437],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":43,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":43,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[1482,1495],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":45,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":45,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[1541,1554],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":53,"column":73,"messageId":"unexpectedAny","endLine":53,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1858,1861],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1858,1861],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":68,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":68,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[2459,2472],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":70,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":70,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[2512,2525],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":72,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":72,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[2572,2585],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":74,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":74,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[2631,2644],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":77,"column":73,"messageId":"unexpectedAny","endLine":77,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2757,2760],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2757,2760],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":88,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":88,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[3198,3211],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":90,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":90,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[3251,3264],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":92,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":92,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[3311,3324],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":94,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":94,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[3372,3385],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":97,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":97,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[3430,3443],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":99,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":99,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[3484,3497],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":101,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":101,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[3545,3558],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":103,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":103,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[3607,3620],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":106,"column":73,"messageId":"unexpectedAny","endLine":106,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3735,3738],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3735,3738],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":115,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":115,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[4027,4040],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":117,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":117,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[4082,4095],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":121,"column":73,"messageId":"unexpectedAny","endLine":121,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4250,4253],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4250,4253],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":130,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":130,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[4554,4567],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":132,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":132,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[4611,4624],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":134,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":134,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[4675,4688],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":136,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":136,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[4759,4772],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":139,"column":73,"messageId":"unexpectedAny","endLine":139,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4889,4892],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4889,4892],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":158,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":158,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[5552,5565],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":160,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":160,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[5605,5618],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":162,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":162,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[5665,5678],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":164,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":164,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[5727,5740],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":166,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":166,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[5784,5797],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":171,"column":73,"messageId":"unexpectedAny","endLine":171,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5967,5970],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5967,5970],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":1,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":185,"column":5,"messageId":"tsIgnoreInsteadOfExpectError","endLine":185,"endColumn":18,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[6536,6549],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":188,"column":73,"messageId":"unexpectedAny","endLine":188,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6680,6683],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6680,6683],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":38,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect } from 'bun:test';\nimport { generateOpenAPI } from './openapi.ts';\nimport { SCHEMAS } from './decorators.ts';\n\ndescribe('generateOpenAPI', () => {\n  it('should generate a default OpenAPI spec with default options', () => {\n    const spec = generateOpenAPI({}, { getTargets: () => new Set() } as any);\n\n    expect(spec.openapi).toBe('3.1.0');\n    expect(spec.info.title).toBe('Generated API');\n    expect(spec.info.version).toBe('1.0.0');\n    expect(spec.info.description).toBe(\n      'API documentation generated by @di-framework/di-framework-http.',\n    );\n    expect(spec.paths).toEqual({});\n    expect(spec.components.schemas).toEqual({});\n  });\n\n  it('should use provided options in the OpenAPI spec', () => {\n    const options = {\n      title: 'Custom API',\n      version: '2.0.0',\n      description: 'Custom description',\n    };\n    const spec = generateOpenAPI(options, {\n      getTargets: () => new Set(),\n    } as any);\n\n    expect(spec.info.title).toBe('Custom API');\n    expect(spec.info.version).toBe('2.0.0');\n    expect(spec.info.description).toBe('Custom description');\n  });\n\n  it('should correctly map a registry with controllers and endpoints', () => {\n    // Mocking the structure that decorators create\n    const mockController = class TestController {};\n    // @ts-ignore\n    mockController.post = () => {};\n    // @ts-ignore\n    mockController.post.isEndpoint = true;\n    // @ts-ignore\n    mockController.post.path = '/test';\n    // @ts-ignore\n    mockController.post.method = 'post';\n    // @ts-ignore\n    mockController.post.metadata = {\n      summary: 'Test Summary',\n      description: 'Test Description',\n      requestBody: { content: { 'application/json': {} } },\n      responses: { '201': { description: 'Created' } },\n    };\n\n    const registry = { getTargets: () => new Set([mockController]) } as any;\n    const spec = generateOpenAPI({}, registry);\n\n    expect(spec.paths['/test']).toBeDefined();\n    expect(spec.paths['/test'].post).toBeDefined();\n    const operation = spec.paths['/test'].post;\n    expect(operation.summary).toBe('Test Summary');\n    expect(operation.description).toBe('Test Description');\n    expect(operation.operationId).toBe('TestController.post');\n    expect(operation.requestBody).toBeDefined();\n    expect(operation.responses['201']).toBeDefined();\n  });\n\n  it('should handle endpoints without metadata', () => {\n    const mockController = class SimpleController {};\n    // @ts-ignore\n    mockController.get = () => {};\n    // @ts-ignore\n    mockController.get.isEndpoint = true;\n    // @ts-ignore\n    mockController.get.path = '/simple';\n    // @ts-ignore\n    mockController.get.method = 'get';\n\n    const registry = { getTargets: () => new Set([mockController]) } as any;\n    const spec = generateOpenAPI({}, registry);\n\n    const operation = spec.paths['/simple'].get;\n    expect(operation.summary).toBe('get'); // defaults to property key\n    expect(operation.responses['200']).toBeDefined(); // default response\n    expect(operation.responses['200'].description).toBe('OK');\n  });\n\n  it('should handle multiple endpoints on the same path', () => {\n    const mockController = class MultiController {};\n    // @ts-ignore\n    mockController.get = () => {};\n    // @ts-ignore\n    mockController.get.isEndpoint = true;\n    // @ts-ignore\n    mockController.get.path = '/resource';\n    // @ts-ignore\n    mockController.get.method = 'get';\n\n    // @ts-ignore\n    mockController.post = () => {};\n    // @ts-ignore\n    mockController.post.isEndpoint = true;\n    // @ts-ignore\n    mockController.post.path = '/resource';\n    // @ts-ignore\n    mockController.post.method = 'post';\n\n    const registry = { getTargets: () => new Set([mockController]) } as any;\n    const spec = generateOpenAPI({}, registry);\n\n    expect(spec.paths['/resource'].get).toBeDefined();\n    expect(spec.paths['/resource'].post).toBeDefined();\n  });\n\n  it('should handle unknown path and method defaults', () => {\n    const mockController = class WeirdController {};\n    // @ts-ignore\n    mockController.weird = () => {};\n    // @ts-ignore\n    mockController.weird.isEndpoint = true;\n    // Note: missing path and method\n\n    const registry = { getTargets: () => new Set([mockController]) } as any;\n    const spec = generateOpenAPI({}, registry);\n\n    expect(spec.paths['/unknown']).toBeDefined();\n    expect(spec.paths['/unknown'].get).toBeDefined();\n  });\n\n  it('should convert :param paths to {param} and inject path parameters', () => {\n    const mockController = class ParamController {};\n    // @ts-ignore\n    mockController.getUser = () => {};\n    // @ts-ignore\n    mockController.getUser.isEndpoint = true;\n    // @ts-ignore\n    mockController.getUser.path = '/users/:userId/posts/:postId';\n    // @ts-ignore\n    mockController.getUser.method = 'get';\n\n    const registry = { getTargets: () => new Set([mockController]) } as any;\n    const spec = generateOpenAPI({}, registry);\n\n    const openApiPath = '/users/{userId}/posts/{postId}';\n    expect(spec.paths[openApiPath]).toBeDefined();\n    const operation = spec.paths[openApiPath].get;\n    expect(operation.parameters).toBeDefined();\n    expect(operation.parameters.length).toBe(2);\n    expect(operation.parameters[0]).toEqual({\n      name: 'userId',\n      in: 'path',\n      required: true,\n      schema: { type: 'string' },\n    });\n    expect(operation.parameters[1].name).toBe('postId');\n  });\n\n  it('should combine automatic path parameters with decorator parameters', () => {\n    const mockController = class MixController {};\n    // @ts-ignore\n    mockController.get = () => {};\n    // @ts-ignore\n    mockController.get.isEndpoint = true;\n    // @ts-ignore\n    mockController.get.path = '/items/:id';\n    // @ts-ignore\n    mockController.get.method = 'get';\n    // @ts-ignore\n    mockController.get.metadata = {\n      parameters: [{ name: 'filter', in: 'query' }],\n    };\n\n    const registry = { getTargets: () => new Set([mockController]) } as any;\n    const spec = generateOpenAPI({}, registry);\n\n    const operation = spec.paths['/items/{id}'].get;\n    expect(operation.parameters).toBeDefined();\n    expect(operation.parameters.length).toBe(2);\n    expect(operation.parameters[0].name).toBe('id');\n    expect(operation.parameters[0].in).toBe('path');\n    expect(operation.parameters[1].name).toBe('filter');\n    expect(operation.parameters[1].in).toBe('query');\n  });\n\n  it('should resolve referenced component schemas via the SCHEMAS symbol', () => {\n    const mockController = class SchemaController {};\n    // @ts-ignore\n    mockController[SCHEMAS] = new Set(['User', 'Post']);\n\n    const registry = { getTargets: () => new Set([mockController]) } as any;\n\n    // Provide the schema definitions in options\n    const schemas = {\n      User: {\n        type: 'object',\n        properties: { id: { type: 'string' }, profile: { $ref: '#/components/schemas/Profile' } },\n      },\n      Post: { type: 'object', properties: { title: { type: 'string' } } },\n      Profile: { type: 'object', properties: { age: { type: 'integer' } } }, // Transitive ref\n      Unused: { type: 'object' }, // Should not be included\n    };\n\n    const spec = generateOpenAPI({ schemas }, registry);\n\n    const resolved = spec.components.schemas;\n    expect(resolved['User']).toBeDefined();\n    expect(resolved['Post']).toBeDefined();\n    expect(resolved['Profile']).toBeDefined(); // Transitively resolved!\n    expect(resolved['Unused']).toBeUndefined();\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework-http/src/openapi.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":72,"column":15,"messageId":"unexpectedAny","endLine":72,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1966,1969],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1966,1969],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":93,"column":35,"messageId":"unexpectedAny","endLine":93,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2577,2580],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2577,2580],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":137,"column":80,"messageId":"unexpectedAny","endLine":137,"endColumn":83,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3969,3972],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3969,3972],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import registry from './registry.ts';\nimport { SCHEMAS } from './decorators.ts';\n\nexport type OpenAPIOptions = {\n  title?: string;\n  version?: string;\n  description?: string;\n  outputPath?: string;\n  schemas?: Record<string, unknown>;\n};\n\n/** Recursively extract `$ref` schema names from a value. */\nfunction collectRefs(obj: unknown, out: Set<string>): void {\n  if (typeof obj !== 'object' || obj === null) return;\n\n  if (Array.isArray(obj)) {\n    for (const item of obj) collectRefs(item, out);\n    return;\n  }\n\n  for (const [key, value] of Object.entries(obj as Record<string, unknown>)) {\n    if (key === '$ref' && typeof value === 'string') {\n      const match = /^#\\/components\\/schemas\\/(.+)$/.exec(value);\n      if (match?.[1]) out.add(match[1]);\n    } else {\n      collectRefs(value, out);\n    }\n  }\n}\n\n/**\n * Resolve a schema name and all schemas it transitively references.\n * Writes resolved schemas into `resolved`.\n */\nfunction resolveSchema(\n  name: string,\n  resolved: Record<string, unknown>,\n  schemas: Record<string, unknown>,\n): void {\n  if (name in resolved) return;\n\n  const schema = schemas[name];\n  if (!schema) return;\n\n  resolved[name] = schema;\n\n  // Find transitive refs within the schema itself\n  const transitive = new Set<string>();\n  collectRefs(schema, transitive);\n  for (const dep of transitive) {\n    resolveSchema(dep, resolved, schemas);\n  }\n}\n\n/** Convert itty-router `:param` paths to OpenAPI `{param}` format. */\nfunction toOpenAPIPath(path: string): string {\n  return path.replace(/:([a-zA-Z_]\\w*)/g, '{$1}');\n}\n\n/** Extract path parameter names from an itty-router path. */\nfunction extractPathParams(path: string): string[] {\n  const names: string[] = [];\n  const re = /:([a-zA-Z_]\\w*)/g;\n  let m: RegExpExecArray | null;\n  while ((m = re.exec(path)) !== null) {\n    if (m[1]) names.push(m[1]);\n  }\n  return names;\n}\n\nexport function generateOpenAPI(options: OpenAPIOptions = {}, registryToUse = registry) {\n  const spec: any = {\n    openapi: '3.1.0',\n    info: {\n      title: options.title || 'Generated API',\n      version: options.version || '1.0.0',\n      description:\n        options.description || 'API documentation generated by @di-framework/di-framework-http.',\n    },\n    paths: {},\n    components: {\n      schemas: {},\n    },\n  };\n\n  const targets = registryToUse.getTargets();\n\n  const metaParamsMap = new Map<string, unknown[]>();\n\n  for (const target of targets) {\n    // Look for endpoints on the target (static properties)\n    for (const key of Object.getOwnPropertyNames(target)) {\n      const property = (target as any)[key];\n      if (property && property.isEndpoint) {\n        const path = property.path || '/unknown';\n        const method = (property.method || 'get').toLowerCase();\n\n        if (property.metadata?.parameters) {\n          metaParamsMap.set(`${path}|${method}`, property.metadata.parameters as unknown[]);\n        }\n\n        if (!spec.paths[path]) {\n          spec.paths[path] = {};\n        }\n\n        spec.paths[path][method] = {\n          summary: property.metadata?.summary || key,\n          description: property.metadata?.description,\n          operationId: `${target.name}.${key}`,\n          requestBody: property.metadata?.requestBody,\n          responses: property.metadata?.responses || {\n            '200': {\n              description: 'OK',\n            },\n          },\n        };\n      }\n    }\n  }\n\n  // Rewrite paths: convert :param → {param} and inject parameters\n  const rewrittenPaths: Record<string, Record<string, unknown>> = {};\n\n  for (const [rawPath, methods] of Object.entries(spec.paths)) {\n    const openApiPath = toOpenAPIPath(rawPath);\n    const pathParamNames = extractPathParams(rawPath);\n\n    const autoParams = pathParamNames.map((name) => ({\n      name,\n      in: 'path',\n      required: true,\n      schema: { type: 'string' },\n    }));\n\n    rewrittenPaths[openApiPath] ??= {};\n\n    for (const [method, operation] of Object.entries(methods as Record<string, any>)) {\n      const decoratorParams = metaParamsMap.get(`${rawPath}|${method}`) ?? [];\n      if (autoParams.length > 0 || decoratorParams.length > 0) {\n        operation.parameters = [...autoParams, ...decoratorParams];\n      }\n      rewrittenPaths[openApiPath][method] = operation;\n    }\n  }\n\n  spec.paths = rewrittenPaths;\n\n  // Collect schemas from decorator Symbols\n  const resolved: Record<string, unknown> = {};\n\n  for (const target of targets) {\n    const refs: Set<string> | undefined = (target as Record<symbol, Set<string>>)[SCHEMAS];\n    if (!refs) continue;\n\n    for (const name of refs) {\n      resolveSchema(name, resolved, options.schemas || {});\n    }\n  }\n\n  spec.components.schemas = resolved;\n\n  return spec;\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework-http/src/registry.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":4,"column":17,"messageId":"unexpectedAny","endLine":4,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[96,99],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[96,99],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":5,"column":30,"messageId":"unexpectedAny","endLine":5,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[130,133],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[130,133],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":6,"column":18,"messageId":"unexpectedAny","endLine":6,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[153,156],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[153,156],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":11,"messageId":"unexpectedAny","endLine":10,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[209,212],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[209,212],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":29,"messageId":"unexpectedAny","endLine":18,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[356,359],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[356,359],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":21,"messageId":"unexpectedAny","endLine":20,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[385,388],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[385,388],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":32,"column":18,"messageId":"unexpectedAny","endLine":32,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[583,586],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[583,586],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":32,"column":54,"messageId":"unexpectedAny","endLine":32,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[619,622],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[619,622],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"export interface EndpointMetadata {\n  summary?: string;\n  description?: string;\n  requestBody?: any;\n  responses?: Record<string, any>;\n  [key: string]: any;\n}\n\nexport interface RegisteredEndpoint {\n  target: any;\n  propertyKey: string;\n  path: string;\n  method: string;\n  metadata: EndpointMetadata;\n}\n\nexport class Registry {\n  private targets = new Set<any>();\n\n  addTarget(target: any) {\n    this.targets.add(target);\n  }\n\n  getTargets() {\n    return this.targets;\n  }\n}\n\nconst GLOBAL_KEY = Symbol.for('@di-framework/http-registry');\n\nconst registry: Registry =\n  (globalThis as any)[GLOBAL_KEY] ?? ((globalThis as any)[GLOBAL_KEY] = new Registry());\n\nexport default registry;\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework-http/src/typed-router.test.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":50,"column":40,"messageId":"unexpectedAny","endLine":50,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1558,1561],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1558,1561],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":89,"column":22,"messageId":"unexpectedAny","endLine":89,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2859,2862],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2859,2862],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":96,"column":22,"messageId":"unexpectedAny","endLine":96,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3047,3050],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3047,3050],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":109,"column":22,"messageId":"unexpectedAny","endLine":109,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3377,3380],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3377,3380],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":133,"column":40,"messageId":"unexpectedAny","endLine":133,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4095,4098],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4095,4098],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":158,"column":40,"messageId":"unexpectedAny","endLine":158,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4774,4777],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4774,4777],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":208,"column":40,"messageId":"unexpectedAny","endLine":208,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6406,6409],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6406,6409],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect } from 'bun:test';\nimport {\n  TypedRouter,\n  json,\n  type Multipart,\n  type RequestSpec,\n  type ResponseSpec,\n  type PathParams,\n  type QueryParams,\n} from './typed-router.ts';\n\ndescribe('TypedRouter', () => {\n  it('should handle GET requests', async () => {\n    const router = TypedRouter();\n    router.get('/test', () => json({ ok: true }));\n\n    const req = new Request('http://localhost/test');\n    const res = await router.fetch(req);\n    expect(res.status).toBe(200);\n    const body = await res.json();\n    expect(body).toEqual({ ok: true });\n  });\n\n  it('should handle POST requests with JSON content-type', async () => {\n    const router = TypedRouter();\n    router.post('/test', (req) => json({ received: req.content }));\n\n    const req = new Request('http://localhost/test', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ hello: 'world' }),\n    });\n    const res = await router.fetch(req);\n    expect(res.status).toBe(200);\n    const body = await res.json();\n    expect(body).toEqual({ received: { hello: 'world' } });\n  });\n\n  it('should reject POST requests without application/json', async () => {\n    const router = TypedRouter();\n    router.post('/test', () => json({ ok: true }));\n\n    const req = new Request('http://localhost/test', {\n      method: 'POST',\n      headers: { 'Content-Type': 'text/plain' },\n      body: 'hello',\n    });\n    const res = await router.fetch(req);\n    expect(res.status).toBe(415);\n    const body = (await res.json()) as any;\n    expect(body.error).toBe('Content-Type must be application/json');\n  });\n\n  it('should attach path and method to the handler', () => {\n    const router = TypedRouter();\n    const handler = router.get('/metadata', () => json({}));\n\n    expect(handler.path).toBe('/metadata');\n    expect(handler.method).toBe('get');\n  });\n\n  it('should support extra arguments in fetch', async () => {\n    type Env = { BINDING: string };\n    const router = TypedRouter<[Env]>();\n    router.get('/env', (req, env) => json({ binding: env.BINDING }));\n\n    const req = new Request('http://localhost/env');\n    const res = await router.fetch(req, { BINDING: 'value' });\n    const body = await res.json();\n    expect(body).toEqual({ binding: 'value' });\n  });\n\n  it('should support other HTTP methods', async () => {\n    const router = TypedRouter();\n    router.put('/put', () => json({ method: 'PUT' }));\n    router.delete('/delete', () => json({ method: 'DELETE' }));\n    router.patch('/patch', () => json({ method: 'PATCH' }));\n\n    expect(\n      (\n        (await (\n          await router.fetch(\n            new Request('http://localhost/put', {\n              method: 'PUT',\n              headers: { 'Content-Type': 'application/json' },\n              body: '{}',\n            }),\n          )\n        ).json()) as any\n      ).method,\n    ).toBe('PUT');\n    expect(\n      (\n        (await (\n          await router.fetch(new Request('http://localhost/delete', { method: 'DELETE' }))\n        ).json()) as any\n      ).method,\n    ).toBe('DELETE');\n    expect(\n      (\n        (await (\n          await router.fetch(\n            new Request('http://localhost/patch', {\n              method: 'PATCH',\n              headers: { 'Content-Type': 'application/json' },\n              body: '{}',\n            }),\n          )\n        ).json()) as any\n      ).method,\n    ).toBe('PATCH');\n  });\n\n  it('should handle multipart POST requests with { multipart: true }', async () => {\n    const router = TypedRouter();\n    router.post<RequestSpec<Multipart<{ file: File }>>, ResponseSpec<{ ok: boolean }>>(\n      '/upload',\n      (req) => {\n        return json({ ok: req.content instanceof FormData });\n      },\n      { multipart: true },\n    );\n\n    const formData = new FormData();\n    formData.append('file', new Blob(['hello']), 'test.txt');\n\n    const req = new Request('http://localhost/upload', {\n      method: 'POST',\n      body: formData,\n    });\n    const res = await router.fetch(req);\n    expect(res.status).toBe(200);\n    const body = (await res.json()) as any;\n    expect(body.ok).toBe(true);\n  });\n\n  it('should parse FormData as req.content in multipart handlers', async () => {\n    const router = TypedRouter();\n    router.post(\n      '/upload',\n      (req) => {\n        const content = req.content as FormData;\n        const name = content.get('name');\n        return json({ name });\n      },\n      { multipart: true },\n    );\n\n    const formData = new FormData();\n    formData.append('name', 'test-file');\n\n    const req = new Request('http://localhost/upload', {\n      method: 'POST',\n      body: formData,\n    });\n    const res = await router.fetch(req);\n    expect(res.status).toBe(200);\n    const body = (await res.json()) as any;\n    expect(body.name).toBe('test-file');\n  });\n\n  it('should not enforce JSON content-type on multipart routes', async () => {\n    const router = TypedRouter();\n    router.post('/upload', () => json({ ok: true }), { multipart: true });\n\n    const formData = new FormData();\n    formData.append('field', 'value');\n\n    const req = new Request('http://localhost/upload', {\n      method: 'POST',\n      body: formData,\n    });\n    const res = await router.fetch(req);\n    // Should NOT return 415\n    expect(res.status).toBe(200);\n  });\n\n  it('should still reject non-JSON on non-multipart POST routes (backward compat)', async () => {\n    const router = TypedRouter();\n    router.post('/json-only', () => json({ ok: true }));\n\n    const formData = new FormData();\n    formData.append('field', 'value');\n\n    const req = new Request('http://localhost/json-only', {\n      method: 'POST',\n      body: formData,\n    });\n    const res = await router.fetch(req);\n    expect(res.status).toBe(415);\n  });\n\n  it('should type params and query from RequestSpec', async () => {\n    const router = TypedRouter();\n    router.get<\n      RequestSpec<PathParams<{ id: string }> & QueryParams<{ search?: string }>>,\n      ResponseSpec<{ id: string; search?: string }>\n    >('/item/:id', (req) => {\n      // Type testing:\n      const id: string = req.params.id;\n      const search: string | undefined = req.query.search;\n      return json({ id, search });\n    });\n\n    const req = new Request('http://localhost/item/123?search=test');\n    const res = await router.fetch(req);\n    expect(res.status).toBe(200);\n    const body = (await res.json()) as any;\n    expect(body).toEqual({ id: '123', search: 'test' });\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework-http/src/typed-router.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_T' is defined but never used.","line":18,"column":73,"messageId":"unusedVar","endLine":18,"endColumn":75},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":38,"column":62,"messageId":"unexpectedAny","endLine":38,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1627,1630],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1627,1630],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":38,"column":70,"messageId":"unexpectedAny","endLine":38,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1635,1638],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1635,1638],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":45,"column":27,"messageId":"unexpectedAny","endLine":45,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1943,1946],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1943,1946],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":45,"column":41,"messageId":"unexpectedAny","endLine":45,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1957,1960],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1957,1960],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":50,"column":37,"messageId":"unexpectedAny","endLine":50,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2054,2057],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2054,2057],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":50,"column":45,"messageId":"unexpectedAny","endLine":50,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2062,2065],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2062,2065],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":64,"column":42,"messageId":"unexpectedAny","endLine":64,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2394,2397],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2394,2397],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":64,"column":50,"messageId":"unexpectedAny","endLine":64,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2402,2405],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2402,2405],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":74,"column":18,"messageId":"unexpectedAny","endLine":74,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2746,2749],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2746,2749],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":77,"column":42,"messageId":"unexpectedAny","endLine":77,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2796,2799],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2796,2799],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":77,"column":50,"messageId":"unexpectedAny","endLine":77,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2804,2807],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2804,2807],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":92,"column":15,"messageId":"unexpectedAny","endLine":92,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3285,3288],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3285,3288],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":100,"column":18,"messageId":"unexpectedAny","endLine":100,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3526,3529],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3526,3529],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":105,"column":41,"messageId":"unexpectedAny","endLine":105,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3733,3736],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3733,3736],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":105,"column":46,"messageId":"unexpectedAny","endLine":105,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3738,3741],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3738,3741],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":108,"column":37,"messageId":"unexpectedAny","endLine":108,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3835,3838],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3835,3838],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":117,"column":38,"messageId":"unexpectedAny","endLine":117,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4239,4242],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4239,4242],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":138,"column":26,"messageId":"unexpectedAny","endLine":138,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4905,4908],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4905,4908],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":19,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Router, withContent, json as ittyJson, type IRequest } from 'itty-router';\n\n/** Marker for body \"shape + content-type\" */\nexport type Json<T> = { readonly __kind: 'json'; readonly __type?: T };\nexport type Multipart<T> = {\n  readonly __kind: 'multipart';\n  readonly __type?: T;\n};\nexport type PathParams<T> = { readonly __pathParams?: T };\nexport type QueryParams<T> = { readonly __queryParams?: T };\n\n/** Spec types you’ll use in generics */\nexport type RequestSpec<BodySpec = unknown> = { readonly __req?: BodySpec };\nexport type ResponseSpec<Body = unknown> = { readonly __res?: Body };\n\n/** Map a BodySpec to the actual req.content type */\ntype ContentOf<BodySpec> =\n  BodySpec extends Json<infer T> ? T : BodySpec extends Multipart<infer _T> ? FormData : unknown;\n\ntype PathParamsOf<BodySpec> = BodySpec extends PathParams<infer T> ? T : Record<string, string>;\n\ntype QueryParamsOf<BodySpec> =\n  BodySpec extends QueryParams<infer T> ? T : Record<string, string | string[] | undefined>;\n\n/** The actual request type your handlers receive */\nexport type TypedRequest<ReqSpec> = Omit<IRequest, 'params' | 'query'> & {\n  content: ContentOf<ReqSpec extends RequestSpec<infer B> ? B : never>;\n  params: PathParamsOf<ReqSpec extends RequestSpec<infer B> ? B : never>;\n  query: QueryParamsOf<ReqSpec extends RequestSpec<infer B> ? B : never>;\n};\n\n/** Typed response helper (phantom only) */\nexport type TypedResponse<ResSpec> = globalThis.Response & {\n  readonly __typedRes?: ResSpec;\n};\n\n/** HandlerController type derived from the Request/Response specs */\nexport type HandlerController<ReqSpec, ResSpec, Args extends any[] = any[]> = (\n  req: TypedRequest<ReqSpec>,\n  ...args: Args\n) => TypedResponse<ResSpec> | Promise<TypedResponse<ResSpec>>;\n\n/** A typed json() that returns a Response annotated with Response<T> */\nexport function json<T>(data: T, init?: ResponseInit): TypedResponse<ResponseSpec<T>> {\n  return ittyJson(data as any, init) as any;\n}\n\nexport type RouteOptions = { multipart?: boolean };\n\nexport type TypedRoute<Args extends any[] = any[]> = <\n  ReqSpec = RequestSpec<unknown>,\n  ResSpec = ResponseSpec<unknown>,\n>(\n  path: string,\n  controller: HandlerController<ReqSpec, ResSpec, Args>,\n  options?: RouteOptions,\n) => TypedRouterType<Args> & {\n  path: string;\n  method: string;\n  reqSpec: ReqSpec;\n  resSpec: ResSpec;\n};\n\nexport type TypedRouterType<Args extends any[] = any[]> = {\n  get: TypedRoute<Args>;\n  post: TypedRoute<Args>;\n  put: TypedRoute<Args>;\n  delete: TypedRoute<Args>;\n  patch: TypedRoute<Args>;\n  head: TypedRoute<Args>;\n  options: TypedRoute<Args>;\n  // Add other methods as needed, or use a more generic approach\n  fetch: (request: Request, ...args: Args) => Promise<Response>;\n  [key: string]: any;\n};\n\nexport function TypedRouter<Args extends any[] = any[]>(\n  opts?: Parameters<typeof Router>[0],\n): TypedRouterType<Args> {\n  const r = Router(opts);\n\n  function enforceJson(req: globalThis.Request) {\n    const ct = (req.headers.get('content-type') ?? '').toLowerCase();\n    if (!ct.includes('application/json') && !ct.includes('+json')) {\n      return ittyJson({ error: 'Content-Type must be application/json' }, { status: 415 });\n    }\n    return null;\n  }\n\n  async function withFormData(req: IRequest) {\n    try {\n      (req as any).content = await (req as globalThis.Request).formData();\n    } catch {\n      // leave content undefined if parsing fails\n    }\n  }\n\n  const methodsToProxy = ['get', 'post', 'put', 'delete', 'patch', 'head', 'options'];\n\n  const wrapper: any = new Proxy(r, {\n    get(target, prop, receiver) {\n      if (typeof prop === 'string' && methodsToProxy.includes(prop)) {\n        return (\n          path: string,\n          controller: HandlerController<any, any, Args>,\n          options?: RouteOptions,\n        ) => {\n          const handler = (...args: any[]) => {\n            const req = args[0] as IRequest & { content?: unknown };\n            const extraArgs = args.slice(1) as Args;\n            if (prop === 'post' || prop === 'put' || prop === 'patch') {\n              if (!options?.multipart) {\n                const ctErr = enforceJson(req);\n                if (ctErr) return ctErr;\n              }\n            }\n            return controller(req as any, ...extraArgs);\n          };\n\n          const middleware = options?.multipart ? withFormData : withContent;\n          target[prop](path, middleware, handler);\n\n          const routeInfo = {\n            path,\n            method: prop,\n            handler,\n            // These are just markers for the generator to know they are there\n            // We can't easily pass the actual type at runtime but we can pass names if we had them\n          };\n\n          Object.assign(handler, routeInfo);\n\n          return handler;\n        };\n      }\n      const value = Reflect.get(target, prop, receiver);\n      if (typeof value === 'function') {\n        return (...args: any[]) => {\n          const result = value.apply(target, args);\n          return result === target ? wrapper : result;\n        };\n      }\n      return value;\n    },\n  });\n\n  return wrapper;\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework-repo/src/adapter.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":34,"column":33,"messageId":"unexpectedAny","endLine":34,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[820,823],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[820,823],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":49,"column":29,"messageId":"unexpectedAny","endLine":49,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1285,1288],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1285,1288],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":82,"column":68,"messageId":"unexpectedAny","endLine":82,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2227,2230],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2227,2230],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":83,"column":55,"messageId":"unexpectedAny","endLine":83,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2299,2302],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2299,2302],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Minimal protocol that every storage backend must implement.\n * Keeps repository layer agnostic to the underlying technology.\n */\nexport interface StorageAdapter<E, ID = string | number> {\n  /**\n   * Retrieve one entity by ID\n   */\n  findById(id: ID): Promise<E | null>;\n\n  /**\n   * Retrieve multiple entities by IDs\n   */\n  findMany(ids: ID[]): Promise<E[]>;\n\n  /**\n   * Retrieve all entities (use with care – pagination usually preferred)\n   */\n  findAll(): Promise<E[]>;\n\n  /**\n   * Create or update (most implementations do upsert under the hood)\n   */\n  save(entity: E): Promise<E>;\n\n  /**\n   * Delete by ID – returns whether deletion actually occurred\n   */\n  delete(id: ID): Promise<boolean>;\n\n  /**\n   * Optional: count matching records (used for pagination metadata)\n   */\n  count(filter?: Record<string, any>): Promise<number>;\n\n  /**\n   * Optional: exists check (cheaper than findById in many backends)\n   */\n  exists(id: ID): Promise<boolean>;\n\n  /**\n   * Paginated listing with basic filtering/sorting support\n   * Filter/sort format is deliberately loose – concrete adapters interpret it.\n   */\n  findPaginated(params: {\n    page?: number;\n    size?: number;\n    sort?: string | string[]; // \"createdAt:desc\" or [\"name:asc\", \"age:desc\"]\n    filter?: Record<string, any>; // { status: \"active\", age: { gte: 18 } }\n    withDeleted?: boolean;\n  }): Promise<{\n    items: E[];\n    total: number;\n    page: number;\n    size: number;\n    pages: number;\n  }>;\n\n  /**\n   * Optional – transaction support\n   * Return value of fn is returned from the transaction\n   */\n  transaction<T>(fn: (adapter: this) => Promise<T>): Promise<T>;\n\n  /**\n   * Optional – clean up / disconnect (important for tests, lambda, etc.)\n   */\n  dispose?(): Promise<void> | void;\n}\n\n/**\n * Factory signature – allows dynamic creation of adapters\n */\nexport type StorageAdapterFactory<E, ID = string | number> = (\n  config: unknown, // connection string, options, credentials, etc.\n  entityName?: string, // useful for table/collection name inference\n) => Promise<StorageAdapter<E, ID>> | StorageAdapter<E, ID>;\n\n/**\n * Helper type to extract Entity & ID from an adapter\n */\nexport type EntityOfAdapter<A> = A extends StorageAdapter<infer E, any> ? E : never;\nexport type IdOfAdapter<A> = A extends StorageAdapter<any, infer ID> ? ID : never;\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework-repo/src/decorators.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":72,"messageId":"unexpectedAny","endLine":12,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[589,592],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[589,592],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Container as ContainerDecorator } from '@di-framework/di-framework/decorators';\n\n/**\n * Repository decorator.\n *\n * This package requires `@di-framework/di-framework` as a peer dependency and\n * delegates to its `@Container` decorator to register repositories with the\n * same singleton/global container instance. Ensure you always import the DI\n * framework using the scoped package name (`@di-framework/di-framework/*`) to\n * avoid loading multiple copies and accidentally creating multiple containers.\n */\nexport function Repository(options: { singleton?: boolean; container?: any } = {}) {\n  return ContainerDecorator(options);\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework-repo/src/in-memory.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":24,"messageId":"unexpectedAny","endLine":11,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[322,325],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[322,325],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":55,"messageId":"unexpectedAny","endLine":51,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1482,1485],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1482,1485],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { EntityRepository } from './repository';\nimport type { EntityId, PaginatedResult } from './types';\n\nexport class InMemoryRepository<\n  E extends { id: ID },\n  ID extends string | number = EntityId,\n> extends EntityRepository<E, ID> {\n  protected items = new Map<ID, E>();\n\n  constructor() {\n    super(undefined as any);\n  }\n\n  async findById(id: ID): Promise<E | null> {\n    return this.items.get(this.normalizeId(id)) || null;\n  }\n\n  async findAll(): Promise<E[]> {\n    return Array.from(this.items.values());\n  }\n\n  async findMany(ids: ID[]): Promise<E[]> {\n    return ids.map((id) => this.items.get(this.normalizeId(id))).filter((e): e is E => !!e);\n  }\n\n  async save(entity: E): Promise<E> {\n    this.items.set(this.normalizeId(entity.id), entity);\n    return entity;\n  }\n\n  async delete(id: ID): Promise<boolean> {\n    return this.items.delete(this.normalizeId(id));\n  }\n\n  async upsert(entity: E): Promise<E> {\n    return this.save(entity);\n  }\n\n  async findPaginated(params: {\n    page?: number;\n    size?: number;\n    [p: string]: unknown;\n  }): Promise<PaginatedResult<E>> {\n    const page = params.page || 1;\n    const size = params.size || 10;\n    const all = await this.findAll();\n\n    // Filter out other params (simple exact match for this in-memory implementation)\n    const filters = Object.entries(params).filter(([key]) => key !== 'page' && key !== 'size');\n    const filtered = all.filter((item) => {\n      return filters.every(([key, value]) => (item as any)[key] === value);\n    });\n\n    const start = (page - 1) * size;\n    const items = filtered.slice(start, start + size);\n    return {\n      items,\n      total: filtered.length,\n      page,\n      size,\n      pages: Math.ceil(filtered.length / size),\n    };\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework-repo/src/index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework-repo/src/repository.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":44,"messageId":"unexpectedAny","endLine":9,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[410,413],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[410,413],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":66,"messageId":"unexpectedAny","endLine":9,"endColumn":69,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[432,435],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[432,435],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":38,"column":49,"messageId":"unexpectedAny","endLine":38,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1191,1194],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1191,1194],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":57,"column":46,"messageId":"unexpectedAny","endLine":57,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1729,1732],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1729,1732],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":71,"column":48,"messageId":"unexpectedAny","endLine":71,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2158,2161],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2158,2161],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ID' is defined but never used.","line":95,"column":42,"messageId":"unusedVar","endLine":95,"endColumn":44}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { StorageAdapter } from './adapter';\nimport type { EntityId, PaginatedResult } from './types';\n\nexport abstract class BaseRepository<E, ID = EntityId> {\n  protected constructor(protected readonly adapter: StorageAdapter<E, ID>) {}\n\n  protected normalizeId(id: ID): ID {\n    // Default normalization (stringify) – can be overridden by subclasses if needed\n    return typeof id === 'string' ? (id as any) : (String(id) as any);\n  }\n\n  // Forward most calls directly (you can add caching, validation, events here)\n  async findById(id: ID): Promise<E | null> {\n    return this.adapter.findById(this.normalizeId(id));\n  }\n\n  async findAll(): Promise<E[]> {\n    return this.adapter.findAll();\n  }\n\n  async findMany(ids: ID[]): Promise<E[]> {\n    return this.adapter.findMany(ids.map((id) => this.normalizeId(id)));\n  }\n\n  async save(entity: E): Promise<E> {\n    return this.adapter.save(entity);\n  }\n\n  async delete(id: ID): Promise<boolean> {\n    return this.adapter.delete(this.normalizeId(id));\n  }\n\n  async findPaginated(params: {\n    page?: number;\n    size?: number;\n    [key: string]: unknown;\n  }): Promise<PaginatedResult<E>> {\n    return this.adapter.findPaginated(params as any);\n  }\n\n  // Transaction support (if adapter provides it)\n  protected async inTransaction<T>(fn: () => Promise<T>): Promise<T> {\n    if (typeof this.adapter.transaction === 'function') {\n      return this.adapter.transaction(() => fn());\n    }\n    return fn(); // fallback\n  }\n\n  async dispose(): Promise<void> {\n    if (typeof this.adapter.dispose === 'function') {\n      await this.adapter.dispose();\n    }\n  }\n}\n\nexport type Database<T extends Record<string, typeof BaseRepository>> = {\n  [K in keyof T]: T[K] extends new (...args: any[]) => infer R\n    ? R\n    : T[K] extends { prototype: infer P }\n      ? P\n      : never;\n};\n\nexport type RepositoryMap<T> = {\n  [K in keyof T]: T[K] extends BaseRepository<infer E> ? BaseRepository<E> : never;\n};\n\nexport abstract class EntityRepository<E, ID = EntityId> extends BaseRepository<E, ID> {}\n\nexport type EntityOf<R> = R extends BaseRepository<infer E> ? E : never;\nexport type IdOf<R> = R extends BaseRepository<any, infer ID> ? ID : never;\n\nexport interface SoftDeletable {\n  deletedAt: Date | null;\n}\n\nexport abstract class SoftDeleteRepository<\n  E extends SoftDeletable & { id: ID },\n  ID = EntityId,\n> extends EntityRepository<E, ID> {\n  abstract softDelete(id: ID): Promise<boolean>;\n  abstract restore(id: ID): Promise<boolean>;\n  abstract findActive(): Promise<E[]>;\n  abstract findDeleted(): Promise<E[]>;\n\n  protected abstract afterNotifyDelete(id: ID): void;\n\n  async softDeleteAndNotify(id: ID): Promise<boolean> {\n    const ok = await this.softDelete(id);\n    if (ok) this.afterNotifyDelete(id);\n    return ok;\n  }\n}\n\nexport interface SearchableRepository<E, ID = EntityId> {\n  search(query: string, params?: { page?: number; size?: number }): Promise<PaginatedResult<E>>;\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework-repo/src/types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework/container.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":22,"messageId":"unexpectedAny","endLine":9,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[289,292],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[289,292],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":43,"messageId":"unexpectedAny","endLine":9,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[310,313],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[310,313],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":25,"messageId":"unexpectedAny","endLine":10,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[347,350],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[347,350],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":28,"messageId":"unexpectedAny","endLine":11,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[390,393],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[390,393],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":32,"column":15,"messageId":"unexpectedAny","endLine":32,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[801,804],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[801,804],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":38,"column":15,"messageId":"unexpectedAny","endLine":38,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[912,915],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[912,915],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":39,"column":31,"messageId":"unexpectedAny","endLine":39,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[947,950],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[947,950],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":47,"column":11,"messageId":"unexpectedAny","endLine":47,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1067,1070],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1067,1070],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":50,"column":14,"messageId":"unexpectedAny","endLine":50,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1132,1135],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1132,1135],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":13,"messageId":"unexpectedAny","endLine":51,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1149,1152],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1149,1152],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'INJECTABLE_METADATA_KEY' is assigned a value but never used.","line":56,"column":7,"messageId":"unusedVar","endLine":56,"endColumn":30},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":69,"column":31,"messageId":"unexpectedAny","endLine":69,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1775,1778],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1775,1778],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":69,"column":57,"messageId":"unexpectedAny","endLine":69,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1801,1804],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1801,1804],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":71,"column":54,"messageId":"unexpectedAny","endLine":71,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1864,1867],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1864,1867],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":71,"column":67,"messageId":"unexpectedAny","endLine":71,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1877,1880],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1877,1880],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":78,"column":52,"messageId":"unexpectedAny","endLine":78,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2072,2075],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2072,2075],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":78,"column":58,"messageId":"unexpectedAny","endLine":78,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2078,2081],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2078,2081],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":82,"column":52,"messageId":"unexpectedAny","endLine":82,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2184,2187],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2184,2187],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":86,"column":55,"messageId":"unexpectedAny","endLine":86,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2332,2335],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2332,2335],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":86,"column":61,"messageId":"unexpectedAny","endLine":86,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2338,2341],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2338,2341],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":165,"column":64,"messageId":"unexpectedAny","endLine":165,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4848,4851],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4848,4851],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":273,"column":79,"messageId":"unexpectedAny","endLine":273,"endColumn":82,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7774,7777],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7774,7777],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":354,"column":93,"messageId":"unexpectedAny","endLine":354,"endColumn":96,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9918,9921],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9918,9921],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":360,"column":67,"messageId":"unexpectedAny","endLine":360,"endColumn":70,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10117,10120],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10117,10120],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":369,"column":93,"messageId":"unexpectedAny","endLine":369,"endColumn":96,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10406,10409],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10406,10409],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":371,"column":70,"messageId":"unexpectedAny","endLine":371,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10493,10496],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10493,10496],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":376,"column":83,"messageId":"unexpectedAny","endLine":376,"endColumn":86,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10672,10675],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10672,10675],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":383,"column":31,"messageId":"unexpectedAny","endLine":383,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10881,10884],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10881,10884],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":401,"column":37,"messageId":"unexpectedAny","endLine":401,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11516,11519],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11516,11519],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":403,"column":28,"messageId":"unexpectedAny","endLine":403,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11605,11608],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11605,11608],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":403,"column":43,"messageId":"unexpectedAny","endLine":403,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11620,11623],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11620,11623],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":423,"column":43,"messageId":"unexpectedAny","endLine":423,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12298,12301],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12298,12301],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-this-alias","severity":1,"message":"Unexpected aliasing of 'this' to local variable.","line":425,"column":15,"messageId":"thisAssignment","endLine":425,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":427,"column":22,"messageId":"unexpectedAny","endLine":427,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12462,12465],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12462,12465],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":427,"column":60,"messageId":"unexpectedAny","endLine":427,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12500,12503],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12500,12503],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":430,"column":34,"messageId":"unexpectedAny","endLine":430,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12583,12586],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12583,12586],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":430,"column":47,"messageId":"unexpectedAny","endLine":430,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12596,12599],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12596,12599],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":444,"column":48,"messageId":"unexpectedAny","endLine":444,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13011,13014],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13011,13014],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":444,"column":73,"messageId":"unexpectedAny","endLine":444,"endColumn":76,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13036,13039],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13036,13039],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":451,"column":40,"messageId":"unexpectedAny","endLine":451,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13302,13305],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13302,13305],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":451,"column":56,"messageId":"unexpectedAny","endLine":451,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[13318,13321],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[13318,13321],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":498,"column":35,"messageId":"unexpectedAny","endLine":498,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14709,14712],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14709,14712],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":555,"column":31,"messageId":"unexpectedAny","endLine":555,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16311,16314],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16311,16314],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":571,"column":25,"messageId":"unexpectedAny","endLine":571,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[16857,16860],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[16857,16860],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":628,"column":83,"messageId":"unexpectedAny","endLine":628,"endColumn":86,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19071,19074],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19071,19074],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":631,"column":24,"messageId":"unexpectedAny","endLine":631,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19177,19180],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19177,19180],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":651,"column":35,"messageId":"unexpectedAny","endLine":651,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[19812,19815],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[19812,19815],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":664,"column":44,"messageId":"unexpectedAny","endLine":664,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20211,20214],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20211,20214],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":667,"column":43,"messageId":"unexpectedAny","endLine":667,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20406,20409],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20406,20409],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-this-alias","severity":1,"message":"Unexpected aliasing of 'this' to local variable.","line":669,"column":15,"messageId":"thisAssignment","endLine":669,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":670,"column":22,"messageId":"unexpectedAny","endLine":670,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20522,20525],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20522,20525],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":670,"column":60,"messageId":"unexpectedAny","endLine":670,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20560,20563],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20560,20563],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":672,"column":34,"messageId":"unexpectedAny","endLine":672,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20642,20645],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20642,20645],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":672,"column":47,"messageId":"unexpectedAny","endLine":672,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20655,20658],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20655,20658],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unsafe-function-type","severity":2,"message":"The `Function` type accepts any function-like value.\nPrefer explicitly defining any function parameters and return type.","line":721,"column":25,"messageId":"bannedFunctionType","endLine":721,"endColumn":33},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":749,"column":61,"messageId":"unexpectedAny","endLine":749,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[22838,22841],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[22838,22841],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":55,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Dependency Injection Container\n *\n * Manages service registration, dependency resolution, and instance lifecycle.\n * Supports singleton pattern and automatic dependency injection via decorators.\n * Works with SWC and TypeScript's native decorator support.\n */\n\ntype Constructor<T = any> = new (...args: any[]) => T;\ntype ServiceFactory<T = any> = () => T;\ntype ServiceDefinition<T = any> = {\n  type: Constructor<T> | ServiceFactory<T>;\n  singleton: boolean;\n  instance?: T;\n};\n\ntype ContainerEventName =\n  | 'registered'\n  | 'resolved'\n  | 'cleared'\n  | 'constructed'\n  | 'telemetry'\n  | string;\ntype ContainerEventPayloads = {\n  registered: {\n    key: string | Constructor;\n    singleton: boolean;\n    kind: 'class' | 'factory';\n  };\n  resolved: {\n    key: string | Constructor;\n    instance: any;\n    singleton: boolean;\n    fromCache: boolean;\n  };\n  constructed: {\n    key: Constructor;\n    instance: any;\n    overrides: Record<number, any>;\n  };\n  cleared: {\n    count: number;\n  };\n  telemetry: {\n    className: string;\n    methodName: string;\n    args: any[];\n    startTime: number;\n    endTime?: number;\n    result?: any;\n    error?: any;\n  };\n};\ntype Listener<T> = (payload: T) => void;\n\nconst INJECTABLE_METADATA_KEY = 'di:injectable';\nconst INJECT_METADATA_KEY = 'di:inject';\nconst DESIGN_PARAM_TYPES_KEY = 'design:paramtypes';\nexport const TELEMETRY_METADATA_KEY = 'di:telemetry';\nexport const TELEMETRY_LISTENER_METADATA_KEY = 'di:telemetry-listener';\nexport const PUBLISHER_METADATA_KEY = 'di:publisher';\nexport const SUBSCRIBER_METADATA_KEY = 'di:subscriber';\nexport const CRON_METADATA_KEY = 'di:cron';\n\n/**\n * Simple metadata storage that doesn't require reflect-metadata\n * Works with SWC's native decorator support\n */\nconst metadataStore = new Map<any, Map<string | symbol, any>>();\n\nfunction defineMetadata(key: string | symbol, value: any, target: any): void {\n  if (!metadataStore.has(target)) {\n    metadataStore.set(target, new Map());\n  }\n  metadataStore.get(target)!.set(key, value);\n}\n\nfunction getMetadata(key: string | symbol, target: any): any {\n  return metadataStore.get(target)?.get(key);\n}\n\nfunction hasMetadata(key: string | symbol, target: any): boolean {\n  return metadataStore.has(target) && metadataStore.get(target)!.has(key);\n}\n\nfunction getOwnMetadata(key: string | symbol, target: any): any {\n  return getMetadata(key, target);\n}\n\n// Parse a single cron field into an array of matching values.\n// Supports: * (any), star/N (step), N (exact), N,M (list), N-M (range)\nfunction parseCronField(field: string, min: number, max: number): number[] {\n  if (field === '*') {\n    const out: number[] = [];\n    for (let i = min; i <= max; i++) out.push(i);\n    return out;\n  }\n  if (field.startsWith('*/')) {\n    const step = parseInt(field.slice(2), 10);\n    const out: number[] = [];\n    for (let i = min; i <= max; i++) {\n      if (i % step === 0) out.push(i);\n    }\n    return out;\n  }\n  if (field.includes(',')) {\n    return field.split(',').map((s) => parseInt(s.trim(), 10));\n  }\n  if (field.includes('-')) {\n    const [lo = 0, hi = 0] = field.split('-').map((s) => parseInt(s.trim(), 10));\n    const out: number[] = [];\n    for (let i = lo; i <= hi; i++) out.push(i);\n    return out;\n  }\n  return [parseInt(field, 10)];\n}\n\ninterface CronFields {\n  minute: number[];\n  hour: number[];\n  dayOfMonth: number[];\n  month: number[];\n  dayOfWeek: number[];\n}\n\nfunction parseCronExpression(expr: string): CronFields {\n  const parts = expr.trim().split(/\\s+/);\n  if (parts.length !== 5)\n    throw new Error(\n      `Invalid cron expression \"${expr}\": expected 5 fields (minute hour dayOfMonth month dayOfWeek)`,\n    );\n  return {\n    minute: parseCronField(parts[0] as string, 0, 59),\n    hour: parseCronField(parts[1] as string, 0, 23),\n    dayOfMonth: parseCronField(parts[2] as string, 1, 31),\n    month: parseCronField(parts[3] as string, 1, 12),\n    dayOfWeek: parseCronField(parts[4] as string, 0, 6),\n  };\n}\n\nfunction getNextCronTime(fields: CronFields, from: Date): Date {\n  const next = new Date(from);\n  next.setSeconds(0, 0);\n  next.setMinutes(next.getMinutes() + 1);\n\n  // Search forward up to ~2 years of minutes\n  for (let i = 0; i < 1_051_920; i++) {\n    if (\n      fields.minute.includes(next.getMinutes()) &&\n      fields.hour.includes(next.getHours()) &&\n      fields.dayOfMonth.includes(next.getDate()) &&\n      fields.month.includes(next.getMonth() + 1) &&\n      fields.dayOfWeek.includes(next.getDay())\n    ) {\n      return next;\n    }\n    next.setMinutes(next.getMinutes() + 1);\n  }\n  throw new Error(`No matching cron time found for expression within 2 years`);\n}\n\nexport class Container {\n  private services = new Map<string | Constructor, ServiceDefinition>();\n  private resolutionStack = new Set<string | Constructor>();\n  private listeners = new Map<ContainerEventName, Set<Listener<any>>>();\n  private cronJobs: Array<{ stop: () => void }> = [];\n\n  /**\n   * Register a service class as injectable\n   */\n  public register<T>(\n    serviceClass: Constructor<T>,\n    options: { singleton?: boolean } = { singleton: true },\n  ): this {\n    const name = serviceClass.name;\n    this.services.set(name, {\n      type: serviceClass,\n      singleton: options.singleton ?? true,\n    });\n    this.services.set(serviceClass, {\n      type: serviceClass,\n      singleton: options.singleton ?? true,\n    });\n\n    this.emit('registered', {\n      key: serviceClass,\n      singleton: options.singleton ?? true,\n      kind: 'class',\n    });\n    return this;\n  }\n\n  /**\n   * Register a service using a factory function\n   */\n  public registerFactory<T>(\n    name: string,\n    factory: ServiceFactory<T>,\n    options: { singleton?: boolean } = { singleton: true },\n  ): this {\n    this.services.set(name, {\n      type: factory,\n      singleton: options.singleton ?? true,\n    });\n    this.emit('registered', {\n      key: name,\n      singleton: options.singleton ?? true,\n      kind: 'factory',\n    });\n    return this;\n  }\n\n  /**\n   * Get or create a service instance\n   */\n  public resolve<T>(serviceClass: Constructor<T> | string): T {\n    const key = typeof serviceClass === 'string' ? serviceClass : serviceClass;\n    const keyStr = typeof serviceClass === 'string' ? serviceClass : serviceClass.name;\n\n    // Check for circular dependencies\n    if (this.resolutionStack.has(key)) {\n      throw new Error(\n        `Circular dependency detected while resolving ${keyStr}. Stack: ${Array.from(this.resolutionStack).join(' -> ')} -> ${keyStr}`,\n      );\n    }\n\n    const definition = this.services.get(key);\n    if (!definition) {\n      throw new Error(`Service '${keyStr}' is not registered in the DI container`);\n    }\n\n    const wasCached = definition.singleton && !!definition.instance;\n\n    // Return cached singleton\n    if (definition.singleton && definition.instance) {\n      this.emit('resolved', {\n        key,\n        instance: definition.instance,\n        singleton: true,\n        fromCache: true,\n      });\n      return definition.instance;\n    }\n\n    // Resolve dependencies\n    this.resolutionStack.add(key);\n    try {\n      const instance = this.instantiate<T>(definition.type);\n\n      // Cache singleton\n      if (definition.singleton) {\n        definition.instance = instance;\n      }\n\n      this.emit('resolved', {\n        key,\n        instance,\n        singleton: definition.singleton,\n        fromCache: wasCached,\n      });\n\n      return instance;\n    } finally {\n      this.resolutionStack.delete(key);\n    }\n  }\n\n  /**\n   * Construct a new instance without registering it in the container.\n   * Supports constructor overrides for primitives/config (constructor pattern).\n   * Always returns a fresh instance (no caching).\n   */\n  public construct<T>(serviceClass: Constructor<T>, overrides: Record<number, any> = {}): T {\n    const keyStr = serviceClass.name;\n    if (this.resolutionStack.has(serviceClass)) {\n      throw new Error(\n        `Circular dependency detected while constructing ${keyStr}. Stack: ${Array.from(this.resolutionStack).join(' -> ')} -> ${keyStr}`,\n      );\n    }\n\n    this.resolutionStack.add(serviceClass);\n    try {\n      const instance = this.instantiate<T>(serviceClass, overrides);\n      this.emit('constructed', { key: serviceClass, instance, overrides });\n      return instance;\n    } finally {\n      this.resolutionStack.delete(serviceClass);\n    }\n  }\n\n  /**\n   * Check if a service is registered\n   */\n  public has(serviceClass: Constructor | string): boolean {\n    return this.services.has(serviceClass);\n  }\n\n  /**\n   * Clear all registered services\n   */\n  public clear(): void {\n    const count = this.services.size;\n    this.stopCronJobs();\n    this.services.clear();\n    this.emit('cleared', { count });\n  }\n\n  /**\n   * Stop all active cron jobs\n   */\n  public stopCronJobs(): void {\n    for (const job of this.cronJobs) {\n      job.stop();\n    }\n    this.cronJobs = [];\n  }\n\n  /**\n   * Get all registered service names\n   */\n  public getServiceNames(): string[] {\n    const names = new Set<string>();\n    this.services.forEach((_, key) => {\n      if (typeof key === 'string') {\n        names.add(key);\n      }\n    });\n    return Array.from(names);\n  }\n\n  /**\n   * Fork the container (prototype pattern): clone registrations into a new container.\n   * Optionally carry over existing singleton instances.\n   */\n  public fork(options: { carrySingletons?: boolean } = {}): Container {\n    const clone = new Container();\n\n    this.services.forEach((def, key) => {\n      clone.services.set(key, {\n        ...def,\n        instance: options.carrySingletons ? def.instance : undefined,\n      });\n    });\n\n    return clone;\n  }\n\n  /**\n   * Subscribe to container lifecycle events (observer pattern).\n   * Returns an unsubscribe function.\n   */\n  public on<K extends keyof ContainerEventPayloads | (string & {})>(\n    event: K,\n    listener: Listener<K extends keyof ContainerEventPayloads ? ContainerEventPayloads[K] : any>,\n  ): () => void {\n    if (!this.listeners.has(event as string)) {\n      this.listeners.set(event as string, new Set());\n    }\n\n    this.listeners.get(event as string)!.add(listener as Listener<any>);\n    return () => this.off(event, listener);\n  }\n\n  /**\n   * Remove a previously registered listener\n   */\n  public off<K extends keyof ContainerEventPayloads | (string & {})>(\n    event: K,\n    listener: Listener<K extends keyof ContainerEventPayloads ? ContainerEventPayloads[K] : any>,\n  ): void {\n    this.listeners.get(event as string)?.delete(listener as Listener<any>);\n  }\n\n  public emit<K extends keyof ContainerEventPayloads | (string & {})>(\n    event: K,\n    payload: K extends keyof ContainerEventPayloads ? ContainerEventPayloads[K] : any,\n  ): void {\n    const listeners = this.listeners.get(event as string);\n    if (!listeners || listeners.size === 0) return;\n\n    listeners.forEach((listener) => {\n      try {\n        (listener as Listener<any>)(payload);\n      } catch (err) {\n        console.error(`[Container] listener for '${String(event)}' threw`, err);\n      }\n    });\n  }\n\n  /**\n   * Apply event publishers and subscribers defined via decorators\n   */\n  private applyEvents<T>(instance: T, constructor: Constructor<T>): void {\n    const className = constructor.name;\n\n    // Handle @Subscriber(event)\n    const subscriberMap: Record<string, string[]> =\n      getMetadata(SUBSCRIBER_METADATA_KEY, constructor.prototype) || {};\n    Object.entries(subscriberMap).forEach(([event, methods]) => {\n      methods.forEach((methodName) => {\n        const method = (instance as any)[methodName];\n        if (typeof method === 'function') {\n          this.on(event as any, (payload: any) => {\n            try {\n              method.call(instance, payload);\n            } catch (err) {\n              console.error(\n                `[Container] Subscriber '${className}.${methodName}' for event '${event}' threw`,\n                err,\n              );\n            }\n          });\n        }\n      });\n    });\n\n    // Handle @Publisher(options)\n    const publisherMethods: Record<\n      string,\n      { event: string; phase?: 'before' | 'after' | 'both'; logging?: boolean }\n    > = getMetadata(PUBLISHER_METADATA_KEY, constructor.prototype) || {};\n    Object.entries(publisherMethods).forEach(([methodName, options]) => {\n      const originalMethod = (instance as any)[methodName];\n      if (typeof originalMethod === 'function') {\n        const self = this;\n        const phase = options.phase ?? 'after';\n        (instance as any)[methodName] = function (...args: any[]) {\n          const startTime = Date.now();\n\n          const emit = (result?: any, error?: any) => {\n            const payload = {\n              className,\n              methodName,\n              args,\n              startTime,\n              endTime: Date.now(),\n              result,\n              error,\n            };\n\n            if (options.logging) {\n              const duration = payload.endTime - payload.startTime;\n              const status = error\n                ? `ERROR: ${error && (error as any).message ? (error as any).message : String(error)}`\n                : 'SUCCESS';\n              console.log(\n                `[Publisher] ${className}.${methodName} -> '${options.event}' - ${status} (${duration}ms)`,\n              );\n            }\n\n            self.emit(options.event as any, payload as any);\n          };\n\n          try {\n            if (phase === 'before' || phase === 'both') {\n              // Emit before invocation (no result yet)\n              emit(undefined, undefined);\n            }\n\n            const result = originalMethod.apply(this, args);\n\n            if (result instanceof Promise) {\n              return result\n                .then((val) => {\n                  if (phase === 'after' || phase === 'both') {\n                    emit(val, undefined);\n                  }\n                  return val;\n                })\n                .catch((err) => {\n                  // Always emit on error to allow subscribers to react\n                  emit(undefined, err);\n                  throw err;\n                });\n            }\n\n            if (phase === 'after' || phase === 'both') {\n              emit(result, undefined);\n            }\n            return result;\n          } catch (err) {\n            emit(undefined, err);\n            throw err;\n          }\n        };\n      }\n    });\n  }\n\n  /**\n   * Apply cron schedules defined via @Cron decorator\n   */\n  private applyCron<T>(instance: T, constructor: Constructor<T>): void {\n    const cronMethods: Record<string, string | number> =\n      getMetadata(CRON_METADATA_KEY, constructor.prototype) || {};\n\n    Object.entries(cronMethods).forEach(([methodName, schedule]) => {\n      const method = (instance as any)[methodName];\n      if (typeof method !== 'function') return;\n\n      if (typeof schedule === 'number') {\n        // Simple interval in ms\n        const timer = setInterval(() => {\n          try {\n            method.call(instance);\n          } catch (err) {\n            console.error(`[Cron] ${constructor.name}.${methodName} threw`, err);\n          }\n        }, schedule);\n        this.cronJobs.push({ stop: () => clearInterval(timer) });\n      } else {\n        // Cron expression\n        const fields = parseCronExpression(schedule);\n        let stopped = false;\n\n        const scheduleNext = () => {\n          if (stopped) return;\n          const now = new Date();\n          const next = getNextCronTime(fields, now);\n          const delay = next.getTime() - now.getTime();\n\n          const timer = setTimeout(() => {\n            if (stopped) return;\n            try {\n              method.call(instance);\n            } catch (err) {\n              console.error(`[Cron] ${constructor.name}.${methodName} threw`, err);\n            }\n            scheduleNext();\n          }, delay);\n\n          // Update the stop function to clear the latest timer\n          job.stop = () => {\n            stopped = true;\n            clearTimeout(timer);\n          };\n        };\n\n        const job = {\n          stop: () => {\n            stopped = true;\n          },\n        };\n        this.cronJobs.push(job);\n        scheduleNext();\n      }\n    });\n  }\n\n  /**\n   * Private method to instantiate a service\n   */\n  private instantiate<T>(\n    type: Constructor<T> | ServiceFactory<T>,\n    overrides: Record<number, any> = {},\n  ): T {\n    if (typeof type !== 'function') {\n      throw new Error('Service type must be a constructor or factory function');\n    }\n\n    // If it's a factory function (not a class), just call it\n    if (!this.isClass(type)) {\n      return (type as ServiceFactory<T>)();\n    }\n\n    // Get constructor parameter types from metadata\n    const paramTypes = getMetadata(DESIGN_PARAM_TYPES_KEY, type) || [];\n    const paramNames = this.getConstructorParamNames(type as Constructor<T>);\n\n    // Resolve dependencies\n    const dependencies: any[] = [];\n    const injectMetadata = getOwnMetadata(INJECT_METADATA_KEY, type) || {};\n    const paramCount = Math.max(paramTypes.length, paramNames.length);\n    for (let i = 0; i < paramCount; i++) {\n      if (Object.prototype.hasOwnProperty.call(overrides, i)) {\n        dependencies.push(overrides[i]);\n        continue;\n      }\n\n      const paramType = paramTypes[i];\n      const paramName = paramNames[i];\n\n      // Prefer explicit @Component() decorator when present\n      const paramInjectTarget = injectMetadata[`param_${i}`];\n\n      if (paramInjectTarget) {\n        // Use explicit injection target (can be class or string token)\n        dependencies.push(this.resolve(paramInjectTarget));\n      } else if (paramType && paramType !== Object) {\n        // Try to resolve by type when metadata is available\n        if (this.has(paramType)) {\n          dependencies.push(this.resolve(paramType));\n        } else if (this.has(paramType.name)) {\n          dependencies.push(this.resolve(paramType.name));\n        } else {\n          throw new Error(\n            `Cannot resolve dependency of type ${paramType.name} for parameter '${paramName}' in ${type.name}`,\n          );\n        }\n      } else {\n        // No information available for this parameter; leave undefined (constructor may provide default)\n      }\n    }\n\n    // Create instance\n    const instance = new (type as Constructor<T>)(...dependencies);\n\n    // Apply Telemetry and TelemetryListener\n    this.applyTelemetry(instance, type as Constructor<T>);\n\n    // Apply custom event publishers and subscribers\n    this.applyEvents(instance, type as Constructor<T>);\n\n    // Apply cron schedules\n    this.applyCron(instance, type as Constructor<T>);\n\n    // Call @Component() decorators on properties\n    // Check both the instance and the constructor prototype for metadata\n    const injectProperties = getMetadata(INJECT_METADATA_KEY, type) || {};\n    const protoInjectProperties =\n      getMetadata(INJECT_METADATA_KEY, (type as Constructor<T>).prototype) || {};\n\n    const allInjectProperties = {\n      ...injectProperties,\n      ...protoInjectProperties,\n    };\n\n    Object.entries(allInjectProperties).forEach(([propName, targetType]: [string, any]) => {\n      if (!propName.startsWith('param_') && targetType) {\n        try {\n          (instance as any)[propName] = this.resolve(targetType);\n        } catch (error) {\n          console.warn(`Failed to inject property '${propName}' on ${type.name}:`, error);\n        }\n      }\n    });\n\n    return instance;\n  }\n\n  /**\n   * Apply telemetry tracking and listeners to an instance\n   */\n  private applyTelemetry<T>(instance: T, constructor: Constructor<T>): void {\n    const className = constructor.name;\n\n    // Handle @TelemetryListener\n    const listenerMethods: string[] =\n      getMetadata(TELEMETRY_LISTENER_METADATA_KEY, constructor.prototype) || [];\n    listenerMethods.forEach((methodName) => {\n      const method = (instance as any)[methodName];\n      if (typeof method === 'function') {\n        this.on('telemetry', (payload) => {\n          try {\n            method.call(instance, payload);\n          } catch (err) {\n            console.error(`[Container] TelemetryListener '${className}.${methodName}' threw`, err);\n          }\n        });\n      }\n    });\n\n    // Handle @Telemetry\n    const telemetryMethods: Record<string, any> =\n      getMetadata(TELEMETRY_METADATA_KEY, constructor.prototype) || {};\n    Object.entries(telemetryMethods).forEach(([methodName, options]) => {\n      const originalMethod = (instance as any)[methodName];\n      if (typeof originalMethod === 'function') {\n        const self = this;\n        (instance as any)[methodName] = function (...args: any[]) {\n          const startTime = Date.now();\n          const emit = (result?: any, error?: any) => {\n            const payload = {\n              className,\n              methodName,\n              args,\n              startTime,\n              endTime: Date.now(),\n              result,\n              error,\n            };\n\n            if (options.logging) {\n              const duration = payload.endTime - payload.startTime;\n              const status = error ? `ERROR: ${error.message || error}` : 'SUCCESS';\n              console.log(`[Telemetry] ${className}.${methodName} - ${status} (${duration}ms)`);\n            }\n\n            self.emit('telemetry', payload);\n          };\n\n          try {\n            const result = originalMethod.apply(this, args);\n\n            if (result instanceof Promise) {\n              return result\n                .then((val) => {\n                  emit(val);\n                  return val;\n                })\n                .catch((err) => {\n                  emit(undefined, err);\n                  throw err;\n                });\n            }\n\n            emit(result);\n            return result;\n          } catch (err) {\n            emit(undefined, err);\n            throw err;\n          }\n        };\n      }\n    });\n  }\n\n  /**\n   * Check if a function is a class constructor\n   */\n  private isClass(func: Function): boolean {\n    return typeof func === 'function' && func.prototype && func.prototype.constructor === func;\n  }\n\n  /**\n   * Extract parameter names from constructor\n   */\n  private getConstructorParamNames(target: Constructor): string[] {\n    const funcStr = target.toString();\n    const match = funcStr.match(/constructor\\s*\\(([^)]*)\\)/);\n    if (!match || !match[1]) return [];\n\n    const paramsStr = match[1];\n    return paramsStr\n      .split(',')\n      .map((param) => {\n        const trimmed = param.trim();\n        const withoutDefault = trimmed.split('=')[0] || '';\n        const withoutType = withoutDefault.split(':')[0] || '';\n        return withoutType.trim();\n      })\n      .filter((param) => param);\n  }\n\n  /**\n   * Extract parameter types from TypeScript compiled code\n   * Looks for type annotations in the compiled constructor signature\n   */\n  private extractParamTypesFromSource(target: Constructor): any[] {\n    const funcStr = target.toString();\n\n    // Try to extract types from decorated constructor\n    // In compiled TypeScript with emitDecoratorMetadata, types appear in decorator calls\n    const decoratorMatch = funcStr.match(\n      /__decorate\\(\\[\\s*(?:\\w+\\s*\\([^)]*\\),?\\s*)*__param\\((\\d+),\\s*(\\w+)\\([^)]*\\)\\)/g,\n    );\n\n    if (decoratorMatch) {\n      // Found decorator-based metadata\n      return [];\n    }\n\n    // Return empty array - will fall back to type annotations or @Component decorators\n    return [];\n  }\n}\n\n/**\n * Global DI container instance\n */\nexport const container = new Container();\n\n/**\n * Get the global DI container\n */\nexport function useContainer(): Container {\n  return container;\n}\n\n/**\n * Export metadata functions for use in decorators\n * These provide a simple, reflect-metadata-free way to store and access metadata\n */\nexport { defineMetadata, getMetadata, hasMetadata, getOwnMetadata };\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework/decorators.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":46,"column":28,"messageId":"unexpectedAny","endLine":46,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1167,1170],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1167,1170],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'descriptor' is defined but never used. Allowed unused args must match /^_/u.","line":46,"column":63,"messageId":"unusedVar","endLine":46,"endColumn":73},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":58,"column":28,"messageId":"unexpectedAny","endLine":58,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1637,1640],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1637,1640],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'descriptor' is defined but never used. Allowed unused args must match /^_/u.","line":58,"column":63,"messageId":"unusedVar","endLine":58,"endColumn":73},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":89,"column":28,"messageId":"unexpectedAny","endLine":89,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2632,2635],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2632,2635],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'descriptor' is defined but never used. Allowed unused args must match /^_/u.","line":89,"column":63,"messageId":"unusedVar","endLine":89,"endColumn":73},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":115,"column":28,"messageId":"unexpectedAny","endLine":115,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3492,3495],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3492,3495],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'descriptor' is defined but never used. Allowed unused args must match /^_/u.","line":115,"column":63,"messageId":"unusedVar","endLine":115,"endColumn":73},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":136,"column":28,"messageId":"unexpectedAny","endLine":136,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4269,4272],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4269,4272],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'descriptor' is defined but never used. Allowed unused args must match /^_/u.","line":136,"column":63,"messageId":"unusedVar","endLine":136,"endColumn":73},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":161,"column":46,"messageId":"unexpectedAny","endLine":161,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5045,5048],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5045,5048],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"The `{}` (\"empty object\") type allows any non-nullish value, including literals like `0` and `\"\"`.\n- If that's what you want, disable this lint rule with an inline comment or configure the 'allowObjectTypes' rule option.\n- If you want a type meaning \"any object\", you probably want `object` instead.\n- If you want a type meaning \"any value\", you probably want `unknown` instead.","line":161,"column":54,"messageId":"noEmptyObject","endLine":161,"endColumn":56,"suggestions":[{"messageId":"replaceEmptyObjectType","data":{"replacement":"object"},"fix":{"range":[5053,5055],"text":"object"},"desc":"Replace `{}` with `object`."},{"messageId":"replaceEmptyObjectType","data":{"replacement":"unknown"},"fix":{"range":[5053,5055],"text":"unknown"},"desc":"Replace `{}` with `unknown`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":203,"column":35,"messageId":"unexpectedAny","endLine":203,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6169,6172],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6169,6172],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":205,"column":27,"messageId":"unexpectedAny","endLine":205,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6222,6225],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6222,6225],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":236,"column":38,"messageId":"unexpectedAny","endLine":236,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7441,7444],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7441,7444],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Dependency Injection Decorators\n *\n * @Container - Marks a class as injectable\n * @Component - Marks dependencies for injection (constructor parameters or properties)\n *\n * Works with SWC and TypeScript's native decorator support.\n * No external dependencies required (no reflect-metadata needed).\n */\n\nimport {\n  useContainer,\n  Container as DIContainer,\n  defineMetadata,\n  getOwnMetadata,\n  getMetadata,\n  TELEMETRY_METADATA_KEY,\n  TELEMETRY_LISTENER_METADATA_KEY,\n  PUBLISHER_METADATA_KEY,\n  SUBSCRIBER_METADATA_KEY,\n  CRON_METADATA_KEY,\n} from './container';\n\nconst INJECTABLE_METADATA_KEY = 'di:injectable';\nconst INJECT_METADATA_KEY = 'di:inject';\n\n/**\n * Options for the @Telemetry decorator\n */\nexport interface TelemetryOptions {\n  /**\n   * Whether to log the telemetry event to the console.\n   * Defaults to false.\n   */\n  logging?: boolean;\n}\n\n/**\n * Marks a method for telemetry tracking.\n * When called, it will emit a 'telemetry' event on the container.\n * Compatible with async and sync methods.\n *\n * @param options Configuration options for telemetry\n */\nexport function Telemetry(options: TelemetryOptions = {}) {\n  return function (target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor) {\n    const methods = getOwnMetadata(TELEMETRY_METADATA_KEY, target) || {};\n    methods[propertyKey as string] = options;\n    defineMetadata(TELEMETRY_METADATA_KEY, methods, target);\n  };\n}\n\n/**\n * Marks a method as a listener for telemetry events.\n * The method will be automatically registered to the container's 'telemetry' event.\n */\nexport function TelemetryListener() {\n  return function (target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor) {\n    const listeners = getOwnMetadata(TELEMETRY_LISTENER_METADATA_KEY, target) || [];\n    listeners.push(propertyKey);\n    defineMetadata(TELEMETRY_LISTENER_METADATA_KEY, listeners, target);\n  };\n}\n\n/**\n * Options for the @Publisher decorator\n */\nexport interface PublisherOptions {\n  /** The custom event name to emit on the container */\n  event: string;\n  /** When to emit relative to the method invocation. Defaults to 'after'. */\n  phase?: 'before' | 'after' | 'both';\n  /** Optional console logging for debug purposes. Defaults to false. */\n  logging?: boolean;\n}\n\n/**\n * Marks a method to publish a custom event on invocation.\n * Useful for cross-platform event-driven architectures.\n *\n * Example:\n * @Container()\n * class UserService {\n *   @Publisher('user.created')\n *   createUser(dto: CreateUserDto) { ... }\n * }\n */\nexport function Publisher(optionsOrEvent: string | PublisherOptions) {\n  return function (target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor) {\n    const options: PublisherOptions =\n      typeof optionsOrEvent === 'string' ? { event: optionsOrEvent } : optionsOrEvent;\n\n    const methods = getOwnMetadata(PUBLISHER_METADATA_KEY, target) || {};\n    methods[propertyKey as string] = {\n      event: options.event,\n      phase: options.phase ?? 'after',\n      logging: options.logging ?? false,\n    } as PublisherOptions;\n    defineMetadata(PUBLISHER_METADATA_KEY, methods, target);\n  };\n}\n\n/**\n * Marks a method to subscribe to a custom event emitted on the container.\n * The decorated method will receive the published payload.\n *\n * Example:\n * @Container()\n * class AuditService {\n *   @Subscriber('user.created')\n *   onUserCreated(payload: any) { ... }\n * }\n */\nexport function Subscriber(event: string) {\n  return function (target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor) {\n    const map = getOwnMetadata(SUBSCRIBER_METADATA_KEY, target) || {};\n    if (!map[event]) map[event] = [];\n    map[event].push(propertyKey as string);\n    defineMetadata(SUBSCRIBER_METADATA_KEY, map, target);\n  };\n}\n\n/**\n * Marks a method to run on a cron schedule.\n * The schedule starts automatically when the service is resolved.\n * Jobs are stopped when container.clear() is called.\n *\n * @param schedule A cron expression (5 fields: minute hour dayOfMonth month dayOfWeek)\n *                 or an interval in milliseconds.\n *\n * @example\n * Cron('0 * * * *')   // every hour\n * Cron(30000)          // every 30 seconds\n */\nexport function Cron(schedule: string | number) {\n  return function (target: any, propertyKey: string | symbol, descriptor: PropertyDescriptor) {\n    const methods = getOwnMetadata(CRON_METADATA_KEY, target) || {};\n    methods[propertyKey as string] = schedule;\n    defineMetadata(CRON_METADATA_KEY, methods, target);\n  };\n}\n\n/**\n * Marks a class as injectable and registers it with the DI container\n *\n * @param options Configuration options for the injectable service\n *\n * @example\n * @Container()\n * class UserService {\n *   getUser(id: string) { ... }\n * }\n *\n * @example With options\n * @Container({ singleton: false })\n * class RequestScopedService {\n *   // New instance created for each resolution\n * }\n */\nexport function Container(options: { singleton?: boolean; container?: DIContainer } = {}) {\n  return function <T extends { new (...args: any[]): {} }>(constructor: T) {\n    const container = options.container ?? useContainer();\n    const singleton = options.singleton ?? true;\n\n    // Mark as injectable using our metadata store\n    defineMetadata(INJECTABLE_METADATA_KEY, true, constructor);\n\n    // Register with container\n    container.register(constructor, { singleton });\n\n    return constructor;\n  };\n}\n\n/**\n * Marks a constructor parameter or property for dependency injection\n *\n * Can be used on:\n * - Constructor parameters\n * - Class properties\n *\n * @param target The class to inject dependencies into. Can be a class constructor or a string identifier.\n *\n * @example Constructor parameter injection\n * @Container()\n * class UserController {\n *   constructor(@Component(UserService) userService: UserService) {}\n * }\n *\n * @example Property injection\n * @Container()\n * class UserService {\n *   @Component(DatabaseConnection)\n *   private db: DatabaseConnection;\n * }\n *\n * @example With string identifier\n * @Container()\n * class PaymentService {\n *   constructor(@Component('apiKey') apiKey: string) {}\n * }\n */\nexport function Component(target: any) {\n  return function (\n    targetClass: object | any,\n    propertyKey?: string | symbol,\n    parameterIndex?: number,\n  ) {\n    // Property injection\n    if (propertyKey && parameterIndex === undefined) {\n      // Store on both the class and its prototype to ensure it's accessible\n      const metadata = getOwnMetadata(INJECT_METADATA_KEY, targetClass) || {};\n      metadata[propertyKey as string] = target;\n      defineMetadata(INJECT_METADATA_KEY, metadata, targetClass);\n\n      // Also store on the constructor if we have it\n      if (targetClass.constructor && targetClass.constructor !== Object) {\n        const constructorMetadata =\n          getOwnMetadata(INJECT_METADATA_KEY, targetClass.constructor) || {};\n        constructorMetadata[propertyKey as string] = target;\n        defineMetadata(INJECT_METADATA_KEY, constructorMetadata, targetClass.constructor);\n      }\n    }\n    // Constructor parameter injection\n    else if (parameterIndex !== undefined) {\n      const metadata = getOwnMetadata(INJECT_METADATA_KEY, targetClass) || {};\n      metadata[`param_${parameterIndex}`] = target;\n      defineMetadata(INJECT_METADATA_KEY, metadata, targetClass);\n    }\n  };\n}\n\n/**\n * Check if a class is marked as injectable\n */\nexport function isInjectable(target: any): boolean {\n  return getMetadata(INJECTABLE_METADATA_KEY, target) === true;\n}\n\n/**\n * Get the container instance used by decorators\n */\nexport function getInjectionContainer(): DIContainer {\n  return useContainer();\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework/tests/constructor-injection.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework/tests/container.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Bar' is defined but never used.","line":8,"column":7,"messageId":"unusedVar","endLine":8,"endColumn":10},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":96,"column":50,"messageId":"unexpectedAny","endLine":96,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3128,3131],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3128,3131],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, beforeEach } from 'bun:test';\nimport { Container, useContainer, container as globalContainer } from '../container';\nimport { Component } from '../decorators';\n\nclass Foo {\n  value = Math.random();\n}\nclass Bar {\n  constructor(public foo: Foo) {}\n}\n\n// Helper factory\nconst makeValueFactory = () => ({ n: Math.random() });\n\ndescribe('Container - registration and resolution', () => {\n  let c: Container;\n\n  beforeEach(() => {\n    c = new Container();\n  });\n\n  it('registers and resolves by class (singleton default)', () => {\n    c.register(Foo);\n    const a = c.resolve(Foo);\n    const b = c.resolve(Foo);\n    expect(a).toBe(b);\n  });\n\n  it('registers with singleton=false to get new instances', () => {\n    c.register(Foo, { singleton: false });\n    const a = c.resolve(Foo);\n    const b = c.resolve(Foo);\n    expect(a).not.toBe(b);\n  });\n\n  it('registerFactory and resolve by string key', () => {\n    c.registerFactory('numberFactory', makeValueFactory);\n    const v1 = c.resolve<{ n: number }>('numberFactory');\n    const v2 = c.resolve<{ n: number }>('numberFactory');\n    // default singleton true for factories\n    expect(v1).toBe(v2);\n    expect(typeof v1.n).toBe('number');\n  });\n\n  it('registerFactory with singleton=false yields fresh values', () => {\n    c.registerFactory('valueFactory', makeValueFactory, { singleton: false });\n    const v1 = c.resolve<{ n: number }>('valueFactory');\n    const v2 = c.resolve<{ n: number }>('valueFactory');\n    expect(v1).not.toBe(v2);\n  });\n\n  it('has() reflects class registration, getServiceNames() lists string registrations', () => {\n    c.register(Foo);\n    c.registerFactory('myFactory', () => 42);\n    expect(c.has(Foo)).toBe(true);\n    expect(c.has('myFactory')).toBe(true);\n    const names = c.getServiceNames();\n    expect(names).toContain('Foo');\n    expect(names).toContain('myFactory');\n  });\n\n  it('clear() removes all registrations', () => {\n    c.register(Foo);\n    c.registerFactory('x', () => 1);\n    c.clear();\n    expect(c.has(Foo)).toBe(false);\n    expect(c.getServiceNames().length).toBe(0);\n  });\n\n  it('throws a helpful error when resolving an unregistered service', () => {\n    expect(() => c.resolve('NotThere')).toThrow(\n      \"Service 'NotThere' is not registered in the DI container\",\n    );\n  });\n});\n\ndescribe('Container - property injection circular detection (via nested resolve calls)', () => {\n  it('detects circular dependency on resolution stack for class registrations', () => {\n    // We simulate circular via factories that resolve each other\n    const c = new Container();\n    c.registerFactory('A', () => c.resolve('B'));\n    c.registerFactory('B', () => c.resolve('A'));\n\n    expect(() => c.resolve('A')).toThrow(/Circular dependency detected/);\n  });\n});\n\ndescribe('Global container export utilities', () => {\n  it('useContainer() returns the singleton container instance', () => {\n    expect(useContainer()).toBe(globalContainer);\n  });\n});\n\ndescribe('Container - observer pattern hooks', () => {\n  it('emits register, resolve, and clear events', () => {\n    const events: Array<{ type: string; payload: any }> = [];\n    const c = new Container();\n\n    c.on('registered', (payload) => events.push({ type: 'registered', payload }));\n    c.on('resolved', (payload) => events.push({ type: 'resolved', payload }));\n    c.on('cleared', (payload) => events.push({ type: 'cleared', payload }));\n\n    c.register(Foo);\n    c.registerFactory('value', makeValueFactory, { singleton: false });\n\n    c.resolve(Foo);\n    c.resolve('value');\n    c.clear();\n\n    expect(events.find((e) => e.type === 'registered' && e.payload.key === Foo)).toBeTruthy();\n    expect(events.filter((e) => e.type === 'resolved').length).toBe(2);\n    expect(events.find((e) => e.type === 'cleared')).toBeTruthy();\n  });\n});\n\ndescribe('Container - constructor and prototype helpers', () => {\n  it('construct() creates fresh instances with overrides', () => {\n    class Dep {\n      id = 'dep';\n    }\n    class NeedsOverrides {\n      dep: Dep;\n      name: string;\n      constructor(@Component(Dep) dep: Dep, name: string) {\n        this.dep = dep;\n        this.name = name;\n      }\n    }\n\n    const c = new Container();\n    c.register(Dep);\n\n    const instance = c.construct(NeedsOverrides, { 1: 'example' });\n    expect(instance.dep).toBe(c.resolve(Dep));\n    expect(instance.name).toBe('example');\n    expect(c.has(NeedsOverrides)).toBe(false);\n  });\n\n  it('fork() clones registrations and optionally carries singletons', () => {\n    const c = new Container();\n    c.register(Foo);\n\n    const originalFoo = c.resolve(Foo);\n\n    const freshFork = c.fork();\n    const forkFoo = freshFork.resolve(Foo);\n    expect(forkFoo).not.toBe(originalFoo);\n\n    const carriedFork = c.fork({ carrySingletons: true });\n    const carriedFoo = carriedFork.resolve(Foo);\n    expect(carriedFoo).toBe(originalFoo);\n\n    freshFork.registerFactory('newFactory', () => 123);\n    expect(c.has('newFactory')).toBe(false);\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework/tests/cron.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework/tests/decorators.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework/tests/events.test.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":21,"messageId":"unexpectedAny","endLine":11,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[420,423],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[420,423],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":30,"messageId":"unexpectedAny","endLine":16,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[539,542],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[539,542],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'audit' is assigned a value but never used.","line":30,"column":11,"messageId":"unusedVar","endLine":30,"endColumn":16},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":45,"column":14,"messageId":"unexpectedAny","endLine":45,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1319,1322],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1319,1322],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":50,"column":25,"messageId":"unexpectedAny","endLine":50,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1428,1431],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1428,1431],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":77,"column":19,"messageId":"unexpectedAny","endLine":77,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1993,1996],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1993,1996],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":82,"column":16,"messageId":"unexpectedAny","endLine":82,"endColumn":19,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2086,2089],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2086,2089],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, beforeEach, jest } from 'bun:test';\nimport { useContainer } from '../container';\nimport { Container as Injectable, Publisher, Subscriber } from '../decorators';\n\nbeforeEach(() => {\n  useContainer().clear();\n});\n\ndescribe('Event Decorators - @Publisher and @Subscriber', () => {\n  it('publishes events and delivers them to subscribers (after phase by default)', () => {\n    const received: any[] = [];\n\n    @Injectable()\n    class AuditService {\n      @Subscriber('user.created')\n      onUserCreated(payload: any) {\n        received.push(payload);\n      }\n    }\n\n    @Injectable()\n    class UserService {\n      @Publisher('user.created')\n      createUser(name: string) {\n        return { id: 1, name };\n      }\n    }\n\n    const c = useContainer();\n    const audit = c.resolve(AuditService);\n    const user = c.resolve(UserService);\n\n    const res = user.createUser('Alice');\n    expect(res).toEqual({ id: 1, name: 'Alice' });\n\n    expect(received.length).toBe(1);\n    const evt = received[0];\n    expect(evt.className).toBe('UserService');\n    expect(evt.methodName).toBe('createUser');\n    expect(evt.args).toEqual(['Alice']);\n    expect(evt.result).toEqual({ id: 1, name: 'Alice' });\n  });\n\n  it(\"supports phase: 'before' to emit prior to execution without result\", () => {\n    let got: any | null = null;\n\n    @Injectable()\n    class Listener {\n      @Subscriber('work')\n      onBefore(payload: any) {\n        got = payload;\n      }\n    }\n\n    @Injectable()\n    class Worker {\n      @Publisher({ event: 'work', phase: 'before' })\n      run(n: number) {\n        return n * 2;\n      }\n    }\n\n    const c = useContainer();\n    c.resolve(Listener);\n    const w = c.resolve(Worker);\n\n    const r = w.run(7);\n    expect(r).toBe(14);\n\n    expect(got).toBeTruthy();\n    expect(got.methodName).toBe('run');\n    expect(got.args).toEqual([7]);\n    expect(got.result).toBeUndefined();\n  });\n\n  it('emits for async success and error cases', async () => {\n    const events: any[] = [];\n\n    @Injectable()\n    class Sink {\n      @Subscriber('async.op')\n      onEvt(e: any) {\n        events.push(e);\n      }\n    }\n\n    @Injectable()\n    class AsyncService {\n      @Publisher('async.op')\n      async succeed(x: number) {\n        return x + 1;\n      }\n\n      @Publisher('async.op')\n      async fail() {\n        throw new Error('boom');\n      }\n    }\n\n    const c = useContainer();\n    c.resolve(Sink);\n    const s = c.resolve(AsyncService);\n\n    const ok = await s.succeed(9);\n    expect(ok).toBe(10);\n\n    // At least one success event should be present\n    const successEvt = events.find((e) => e.methodName === 'succeed');\n    expect(successEvt).toBeTruthy();\n    expect(successEvt.result).toBe(10);\n\n    await expect(s.fail()).rejects.toThrow('boom');\n\n    const errorEvt = events.find((e) => e.methodName === 'fail');\n    expect(errorEvt).toBeTruthy();\n    expect(errorEvt.error).toBeTruthy();\n    expect(errorEvt.error.message).toBe('boom');\n  });\n\n  it('logs when logging option is enabled on @Publisher', () => {\n    const logSpy = jest.spyOn(console, 'log').mockImplementation(() => {});\n\n    @Injectable()\n    class Logged {\n      @Publisher({ event: 'log.op', logging: true })\n      go() {\n        return 'ok';\n      }\n    }\n\n    const c = useContainer();\n    const svc = c.resolve(Logged);\n    svc.go();\n\n    expect(logSpy).toHaveBeenCalled();\n    const last = logSpy.mock.calls[logSpy.mock.calls.length - 1]![0];\n    expect(last).toContain(\"[Publisher] Logged.go -> 'log.op' - SUCCESS\");\n\n    logSpy.mockRestore();\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework/tests/telemetry.test.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":24,"messageId":"unexpectedAny","endLine":11,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[395,398],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[395,398],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":26,"messageId":"unexpectedAny","endLine":16,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[501,504],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[501,504],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":45,"column":24,"messageId":"unexpectedAny","endLine":45,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1339,1342],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1339,1342],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":50,"column":26,"messageId":"unexpectedAny","endLine":50,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1445,1448],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1445,1448],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":75,"column":24,"messageId":"unexpectedAny","endLine":75,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2019,2022],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2019,2022],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":80,"column":26,"messageId":"unexpectedAny","endLine":80,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2125,2128],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2125,2128],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, beforeEach, jest } from 'bun:test';\nimport { useContainer } from '../container';\nimport { Container as Injectable, Telemetry, TelemetryListener } from '../decorators';\n\nbeforeEach(() => {\n  useContainer().clear();\n});\n\ndescribe('Telemetry Decorators', () => {\n  it('should capture telemetry from @Telemetry annotated methods', async () => {\n    let capturedEvent: any = null;\n\n    @Injectable()\n    class MyListener {\n      @TelemetryListener()\n      onTelemetry(event: any) {\n        capturedEvent = event;\n      }\n    }\n\n    @Injectable()\n    class MyService {\n      @Telemetry()\n      async doSomething(arg1: string) {\n        return `done ${arg1}`;\n      }\n    }\n\n    const container = useContainer();\n    container.resolve(MyListener);\n    const service = container.resolve(MyService);\n\n    const result = await service.doSomething('test');\n\n    expect(result).toBe('done test');\n    expect(capturedEvent).toBeDefined();\n    expect(capturedEvent.className).toBe('MyService');\n    expect(capturedEvent.methodName).toBe('doSomething');\n    expect(capturedEvent.args).toEqual(['test']);\n    expect(capturedEvent.result).toBe('done test');\n    expect(capturedEvent.startTime).toBeLessThanOrEqual(capturedEvent.endTime);\n  });\n\n  it('should capture errors in telemetry', async () => {\n    let capturedEvent: any = null;\n\n    @Injectable()\n    class MyListener {\n      @TelemetryListener()\n      onTelemetry(event: any) {\n        capturedEvent = event;\n      }\n    }\n\n    @Injectable()\n    class MyService {\n      @Telemetry()\n      doError() {\n        throw new Error('fail');\n      }\n    }\n\n    const container = useContainer();\n    container.resolve(MyListener);\n    const service = container.resolve(MyService);\n\n    expect(() => service.doError()).toThrow('fail');\n\n    expect(capturedEvent).toBeDefined();\n    expect(capturedEvent.error).toBeDefined();\n    expect(capturedEvent.error.message).toBe('fail');\n  });\n\n  it('should work with sync methods', () => {\n    let capturedEvent: any = null;\n\n    @Injectable()\n    class MyListener {\n      @TelemetryListener()\n      onTelemetry(event: any) {\n        capturedEvent = event;\n      }\n    }\n\n    @Injectable()\n    class MyService {\n      @Telemetry()\n      doSync(val: number) {\n        return val * 2;\n      }\n    }\n\n    const container = useContainer();\n    container.resolve(MyListener);\n    const service = container.resolve(MyService);\n\n    const result = service.doSync(21);\n\n    expect(result).toBe(42);\n    expect(capturedEvent).toBeDefined();\n    expect(capturedEvent.methodName).toBe('doSync');\n    expect(capturedEvent.result).toBe(42);\n  });\n\n  it('should log to console when logging option is enabled', () => {\n    const logSpy = jest.spyOn(console, 'log').mockImplementation(() => {});\n\n    @Injectable()\n    class LoggingService {\n      @Telemetry({ logging: true })\n      doLogged(val: string) {\n        return `logged ${val}`;\n      }\n    }\n\n    const container = useContainer();\n    const service = container.resolve(LoggingService);\n\n    service.doLogged('hello');\n\n    expect(logSpy).toHaveBeenCalled();\n    const lastCall = logSpy.mock.calls[logSpy.mock.calls.length - 1]![0];\n    expect(lastCall).toContain('[Telemetry] LoggingService.doLogged - SUCCESS');\n    expect(lastCall).toMatch(/\\(\\d+ms\\)/);\n\n    logSpy.mockRestore();\n  });\n\n  it('should log errors to console when logging option is enabled', () => {\n    const logSpy = jest.spyOn(console, 'log').mockImplementation(() => {});\n\n    @Injectable()\n    class LoggingErrorService {\n      @Telemetry({ logging: true })\n      doLoggedError() {\n        throw new Error('logged fail');\n      }\n    }\n\n    const container = useContainer();\n    const service = container.resolve(LoggingErrorService);\n\n    expect(() => service.doLoggedError()).toThrow('logged fail');\n\n    expect(logSpy).toHaveBeenCalled();\n    const lastCall = logSpy.mock.calls[logSpy.mock.calls.length - 1]![0];\n    expect(lastCall).toContain(\n      '[Telemetry] LoggingErrorService.doLoggedError - ERROR: logged fail',\n    );\n\n    logSpy.mockRestore();\n  });\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/di-framework/types.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":45,"messageId":"unexpectedAny","endLine":10,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[224,227],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[224,227],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":46,"column":31,"messageId":"unexpectedAny","endLine":46,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[952,955],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[952,955],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":51,"column":20,"messageId":"unexpectedAny","endLine":51,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1034,1037],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1034,1037],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":131,"column":39,"messageId":"unexpectedAny","endLine":131,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2874,2877],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2874,2877],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":156,"column":38,"messageId":"unexpectedAny","endLine":156,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3399,3402],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3399,3402],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":167,"column":39,"messageId":"unexpectedAny","endLine":167,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3618,3621],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3618,3621],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":200,"column":31,"messageId":"unexpectedAny","endLine":200,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4300,4303],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4300,4303],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":201,"column":20,"messageId":"unexpectedAny","endLine":201,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4332,4335],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4332,4335],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-namespace","severity":1,"message":"ES2015 module syntax is preferred over namespaces.","line":246,"column":8,"messageId":"moduleSyntaxIsPreferred","endLine":277,"endColumn":2},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":250,"column":39,"messageId":"unexpectedAny","endLine":250,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5283,5286],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5283,5286],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":250,"column":65,"messageId":"unexpectedAny","endLine":250,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5309,5312],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5309,5312],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":257,"column":34,"messageId":"unexpectedAny","endLine":257,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5467,5470],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5467,5470],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":257,"column":62,"messageId":"unexpectedAny","endLine":257,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5495,5498],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5495,5498],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":310,"column":53,"messageId":"unexpectedAny","endLine":310,"endColumn":56,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6799,6802],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6799,6802],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":310,"column":63,"messageId":"unexpectedAny","endLine":310,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6809,6812],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6809,6812],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Type Definitions and Utilities for the DI Framework\n *\n * Provides interfaces and utility types for building services\n */\n\n/**\n * Represents a service class constructor\n */\nexport type ServiceClass<T> = new (...args: any[]) => T;\n\n/**\n * Represents a factory function that creates a service\n */\nexport type ServiceFactory<T> = () => T;\n\n/**\n * Service registration options\n */\nexport interface InjectionOptions {\n  /**\n   * Whether this service should be a singleton (default: true)\n   * Singleton: same instance returned for each resolution\n   * Transient: new instance created for each resolution\n   */\n  singleton?: boolean;\n}\n\n/**\n * Service with lifecycle methods\n */\nexport interface ILifecycleService {\n  /**\n   * Called after the service is created\n   */\n  onInit?(): void;\n\n  /**\n   * Called before the service is destroyed\n   */\n  onDestroy?(): void;\n\n  /**\n   * Called to set environment variables\n   */\n  setEnv?(env: Record<string, any>): void;\n\n  /**\n   * Called to set execution context\n   */\n  setCtx?(context: any): void;\n}\n\n/**\n * Error thrown when DI resolution fails\n */\nexport class DIError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'DIError';\n  }\n}\n\n/**\n * Error thrown when circular dependency is detected\n */\nexport class CircularDependencyError extends DIError {\n  constructor(message: string) {\n    super(message);\n    this.name = 'CircularDependencyError';\n  }\n}\n\n/**\n * Error thrown when service is not registered\n */\nexport class ServiceNotFoundError extends DIError {\n  constructor(serviceName: string) {\n    super(`Service '${serviceName}' is not registered in the DI container`);\n    this.name = 'ServiceNotFoundError';\n  }\n}\n\n/**\n * Type-safe service class identity\n *\n * Use this to ensure type safety when working with service classes\n *\n * @example\n * type UserServiceId = ServiceId<UserService>;\n * const serviceId: UserServiceId = UserService;\n */\nexport type ServiceId<T> = ServiceClass<T>;\n\n/**\n * Utility type to extract the constructor parameters of a service\n *\n * @example\n * type UserServiceDeps = ConstructorParameters<typeof UserService>;\n */\nexport type ServiceDependencies<T> =\n  T extends ServiceClass<infer U> ? ConstructorParameters<ServiceClass<U>> : never;\n\n/**\n * Utility type to make all properties of a service optional\n *\n * @example\n * @Container()\n * class MyService implements PartialService<MyService> {\n *   optionalDependency?: SomeService;\n * }\n */\nexport type PartialService<T> = Partial<T>;\n\n/**\n * Utility to create a service instance with mocked dependencies\n *\n * @example\n * const mockUserService = new MockService<UserService>({\n *   database: mockDb,\n *   logger: mockLogger\n * });\n */\nexport type MockServiceOptions<T> = {\n  [K in keyof T]?: T[K];\n};\n\n/**\n * Represents a resolvable service in the container\n */\nexport type Resolvable = ServiceClass<any> | string;\n\n/**\n * Configuration for the DI container\n */\nexport interface ContainerConfig {\n  /**\n   * Whether to throw on unregistered services (default: true)\n   */\n  throwOnUnregistered?: boolean;\n\n  /**\n   * Whether to detect circular dependencies (default: true)\n   */\n  detectCircularDependencies?: boolean;\n\n  /**\n   * Maximum recursion depth for dependency resolution (default: 100)\n   */\n  maxResolutionDepth?: number;\n}\n\n/**\n * Service metadata stored in the container\n */\nexport interface ServiceMetadata<T = any> {\n  type: ServiceClass<T> | ServiceFactory<T>;\n  singleton: boolean;\n  instance?: T;\n  dependencies?: string[];\n  createdAt?: Date;\n}\n\n/**\n * Result of resolving a service\n */\nexport interface ResolutionResult<T = any> {\n  service: T;\n  serviceClass: ServiceClass<T>;\n  isSingleton: boolean;\n  resolutionTimeMs: number;\n}\n\n/**\n * Information about a registered service\n */\nexport interface ServiceInfo {\n  name: string;\n  isSingleton: boolean;\n  dependencies: string[];\n  hasInstance: boolean;\n}\n\n/**\n * Generic service base class with lifecycle support\n *\n * @example\n * @Container()\n * export class MyService extends BaseService {\n *   onInit() {\n *     console.log('Service initialized');\n *   }\n * }\n */\nexport abstract class BaseService implements ILifecycleService {\n  protected logger: ILogger = new ConsoleLogger();\n\n  onInit?(): void;\n  onDestroy?(): void;\n  setEnv?(env: Record<string, any>): void;\n  setCtx?(context: any): void;\n\n  protected log(message: string): void {\n    this.logger.log(message);\n  }\n\n  protected error(message: string): void {\n    this.logger.error(message);\n  }\n}\n\n/**\n * Logger interface for services\n */\nexport interface ILogger {\n  log(message: string): void;\n  error(message: string): void;\n  warn(message: string): void;\n  debug(message: string): void;\n}\n\n/**\n * Console-based logger implementation\n */\nexport class ConsoleLogger implements ILogger {\n  log(message: string): void {\n    console.log(`[LOG] ${message}`);\n  }\n\n  error(message: string): void {\n    console.error(`[ERROR] ${message}`);\n  }\n\n  warn(message: string): void {\n    console.warn(`[WARN] ${message}`);\n  }\n\n  debug(message: string): void {\n    console.debug(`[DEBUG] ${message}`);\n  }\n}\n\n/**\n * Utility functions for working with services\n */\nexport namespace ServiceUtils {\n  /**\n   * Check if an object is a service class\n   */\n  export function isServiceClass(obj: any): obj is ServiceClass<any> {\n    return typeof obj === 'function' && obj.prototype;\n  }\n\n  /**\n   * Check if an object is a factory function\n   */\n  export function isFactory(obj: any): obj is ServiceFactory<any> {\n    return typeof obj === 'function' && !isServiceClass(obj);\n  }\n\n  /**\n   * Get the service name\n   */\n  export function getServiceName(service: Resolvable): string {\n    if (typeof service === 'string') {\n      return service;\n    }\n    return service.name;\n  }\n\n  /**\n   * Create a mock service for testing\n   */\n  export function createMockService<T>(overrides: Partial<T> = {}): Partial<T> {\n    return overrides;\n  }\n}\n\n/**\n * Decorator factory for creating custom decorators\n *\n * @example\n * export function Cached(ttl: number = 60000) {\n *   return function (\n *     target: any,\n *     propertyKey: string,\n *     descriptor: PropertyDescriptor\n *   ) {\n *     const originalMethod = descriptor.value;\n *     const cache = new Map<string, { data: any; time: number }>();\n *\n *     descriptor.value = function (...args: any[]) {\n *       const key = JSON.stringify(args);\n *       const cached = cache.get(key);\n *       const now = Date.now();\n *\n *       if (cached && now - cached.time < ttl) {\n *         return cached.data;\n *       }\n *\n *       const result = originalMethod.apply(this, args);\n *       cache.set(key, { data: result, time: now });\n *       return result;\n *     };\n *\n *     return descriptor;\n *   };\n * }\n */\nexport function createDecorator<T extends (...args: any[]) => any>(decorator: T): T {\n  return decorator;\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/examples/packages/advanced/index.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'body' is defined but never used. Allowed unused args must match /^_/u.","line":58,"column":37,"messageId":"unusedVar","endLine":58,"endColumn":41},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":106,"column":35,"messageId":"unexpectedAny","endLine":106,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2669,2672],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2669,2672],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":170,"column":35,"messageId":"unexpectedAny","endLine":170,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4422,4425],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4422,4425],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":182,"column":27,"messageId":"unexpectedAny","endLine":182,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4705,4708],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4705,4708],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":186,"column":21,"messageId":"unexpectedAny","endLine":186,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4775,4778],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4775,4778],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":208,"column":25,"messageId":"unexpectedAny","endLine":208,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5154,5157],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5154,5157],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":251,"column":83,"messageId":"unexpectedAny","endLine":251,"endColumn":86,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6255,6258],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6255,6258],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":271,"column":26,"messageId":"unexpectedAny","endLine":271,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6823,6826],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6823,6826],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":339,"column":13,"messageId":"unexpectedAny","endLine":339,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9365,9368],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9365,9368],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":344,"column":13,"messageId":"unexpectedAny","endLine":344,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9641,9644],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9641,9644],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Advanced di-framework Examples\n *\n * This file demonstrates advanced usage patterns of the DI framework\n */\n\nimport { Container as DIContainer, useContainer } from '@di-framework/di-framework/container';\nimport {\n  Container,\n  Component,\n  Telemetry,\n  TelemetryListener,\n} from '@di-framework/di-framework/decorators';\n\n// ============================================================================\n// Example 1: Multi-Level Dependency Chains\n// ============================================================================\n\n@Container()\nclass EmailService {\n  send(to: string, subject: string, body: string): void {\n    console.log(`📧 Email sent to ${to}`);\n    console.log(`   Subject: ${subject}`);\n    console.log(`   Body: ${body}`);\n  }\n}\n\n@Container()\nclass NotificationService {\n  @Component(EmailService)\n  private email!: EmailService;\n\n  constructor() {}\n\n  notifyUser(userId: string, message: string): void {\n    this.email.send(`user${userId}@example.com`, 'Notification', message);\n  }\n}\n\n@Container()\nclass UserRegistrationService {\n  @Component(NotificationService)\n  private notifications!: NotificationService;\n\n  constructor() {}\n\n  registerUser(name: string): void {\n    console.log(`✅ User registered: ${name}`);\n    this.notifications.notifyUser('1', `Welcome ${name}!`);\n  }\n}\n\n// ============================================================================\n// Example 2: Custom Container for Testing\n// ============================================================================\n\nclass TestEmailService extends EmailService {\n  send(to: string, subject: string, body: string): void {\n    console.log(`[TEST] Email to ${to}: ${subject}`);\n  }\n}\n\n// ============================================================================\n// Example 3: Configuration Service with Factory\n// ============================================================================\n\ninterface AppConfig {\n  apiUrl: string;\n  apiKey: string;\n  environment: string;\n}\n\n@Container()\nclass ConfigService {\n  private config: AppConfig = {\n    apiUrl: 'https://api.example.com',\n    apiKey: process.env.API_KEY || 'default-key',\n    environment: process.env.NODE_ENV || 'development',\n  };\n\n  get(key: keyof AppConfig): string {\n    return this.config[key];\n  }\n\n  getAll(): AppConfig {\n    return { ...this.config };\n  }\n}\n\n@Container()\nclass ApiService {\n  private baseUrl: string = '';\n\n  @Component(ConfigService)\n  private config!: ConfigService;\n\n  constructor() {\n    // baseUrl will be set after injection\n  }\n\n  setConfig(config: ConfigService): void {\n    this.config = config;\n    this.baseUrl = config.get('apiUrl');\n  }\n\n  call(endpoint: string): Promise<any> {\n    if (!this.baseUrl) {\n      this.baseUrl = this.config.get('apiUrl');\n    }\n    console.log(`🌐 API Call: ${this.baseUrl}${endpoint}`);\n    return Promise.resolve({ success: true });\n  }\n}\n\n// ============================================================================\n// Example 4: Transient Services for Request Scoping\n// ============================================================================\n\n@Container({ singleton: false })\nclass RequestLogger {\n  private requestId: string = Math.random().toString(36).substring(7);\n  private startTime: number = Date.now();\n\n  @Component(ConfigService)\n  private config!: ConfigService;\n\n  constructor() {\n    // Config will be injected\n  }\n\n  onInit(): void {\n    console.log(`🔍 [Request ${this.requestId}] Created in ${this.config.get('environment')}`);\n  }\n\n  log(message: string): void {\n    const elapsed = Date.now() - this.startTime;\n    console.log(`[Request ${this.requestId}] (${elapsed}ms) ${message}`);\n  }\n\n  getRequestId(): string {\n    return this.requestId;\n  }\n}\n\n@Container()\nclass RequestHandler {\n  @Component(ApiService)\n  private api!: ApiService;\n\n  constructor() {}\n\n  async handle(endpoint: string, logger: RequestLogger): Promise<void> {\n    logger.log('Handling request...');\n    const result = await this.api.call(endpoint);\n    logger.log(`Response received: ${JSON.stringify(result)}`);\n  }\n}\n\n// ============================================================================\n// Example 5: Service with Optional Lifecycle Methods\n// ============================================================================\n\ninterface Lifecycle {\n  onInit?(): void;\n  onDestroy?(): void;\n}\n\n@Container()\nclass CacheService implements Lifecycle {\n  private cache = new Map<string, any>();\n  private hitCount = 0;\n  private missCount = 0;\n\n  onInit(): void {\n    console.log('🗄️ Cache service initialized');\n  }\n\n  onDestroy(): void {\n    console.log(`🗄️ Cache service destroyed (${this.hitCount} hits, ${this.missCount} misses)`);\n  }\n\n  set(key: string, value: any): void {\n    this.cache.set(key, value);\n  }\n\n  get(key: string): any {\n    if (this.cache.has(key)) {\n      this.hitCount++;\n      return this.cache.get(key);\n    }\n    this.missCount++;\n    return undefined;\n  }\n\n  clear(): void {\n    this.cache.clear();\n    console.log('🗄️ Cache cleared');\n  }\n}\n\n@Container()\nclass CachedDataService {\n  @Component(CacheService)\n  private cache!: CacheService;\n\n  constructor() {}\n\n  getData(key: string): any {\n    let data = this.cache.get(key);\n    if (!data) {\n      data = { id: key, timestamp: Date.now() };\n      this.cache.set(key, data);\n    }\n    return data;\n  }\n}\n\n// ============================================================================\n// Example 6: Composite Services\n// ============================================================================\n\n@Container()\nclass AuthService {\n  authenticate(username: string, password: string): boolean {\n    console.log(`🔐 Authenticating user: ${username}`);\n    return username === 'admin' && password === 'password';\n  }\n}\n\n@Container()\nclass PermissionService {\n  hasPermission(userId: string, action: string): boolean {\n    console.log(`✓ Checking permission for ${userId} to ${action}`);\n    return true;\n  }\n}\n\n@Container()\nclass SecureApiService {\n  @Component(ApiService)\n  private api!: ApiService;\n\n  @Component(AuthService)\n  private auth!: AuthService;\n\n  @Component(PermissionService)\n  private permissions!: PermissionService;\n\n  constructor() {}\n\n  async secureCall(endpoint: string, username: string, password: string): Promise<any> {\n    if (!this.auth.authenticate(username, password)) {\n      throw new Error('Authentication failed');\n    }\n\n    if (!this.permissions.hasPermission(username, 'api:call')) {\n      throw new Error('Permission denied');\n    }\n\n    return this.api.call(endpoint);\n  }\n}\n\n// ============================================================================\n// Example 7: Telemetry and Event Monitoring\n// ============================================================================\n\n@Container()\nclass AnalyticsService {\n  @TelemetryListener()\n  trackMethodCall(event: any): void {\n    const { className, methodName, startTime, endTime, error } = event;\n    const duration = endTime ? (endTime - startTime).toFixed(2) : 'N/A';\n    console.log(\n      `📊 [Analytics] ${className}.${methodName} - ${error ? 'FAILED' : 'SUCCESS'} (${duration}ms)`,\n    );\n  }\n}\n\n@Container()\nclass PaymentProcessor {\n  @Component(AnalyticsService)\n  private analytics!: AnalyticsService;\n\n  @Telemetry({ logging: true })\n  async processPayment(amount: number): Promise<boolean> {\n    console.log(`💳 Processing payment of $${amount}...`);\n    // Simulate API call\n    await new Promise((resolve) => setTimeout(resolve, 100));\n    return true;\n  }\n}\n\n// ============================================================================\n// Demo: Running all examples\n// ============================================================================\n\nexport async function runAdvancedExamples(): Promise<void> {\n  console.log('\\n' + '='.repeat(70));\n  console.log('Advanced di-framework Examples');\n  console.log('='.repeat(70) + '\\n');\n\n  const container = useContainer();\n\n  // Example 1: Multi-level dependency chains\n  console.log('--- Example 1: Multi-Level Dependency Chains ---\\n');\n  const registration = container.resolve(UserRegistrationService);\n  registration.registerUser('Alice');\n  console.log();\n\n  // Example 2: Testing with custom container\n  console.log('--- Example 2: Custom Container for Testing ---\\n');\n  const testContainer = new DIContainer();\n  testContainer.register(ConfigService);\n  testContainer.register(TestEmailService);\n  // In a real test, you'd also register NotificationService, etc.\n  console.log('✓ Test container created with mock services\\n');\n\n  // Example 3: Configuration Service\n  console.log('--- Example 3: Configuration Service ---\\n');\n  const config = container.resolve(ConfigService);\n  console.log('Config:', config.getAll());\n  const api = container.resolve(ApiService);\n  await api.call('/users');\n  console.log();\n\n  // Example 4: Transient Services\n  console.log('--- Example 4: Transient Services for Requests ---\\n');\n  const handler = container.resolve(RequestHandler);\n  const logger1 = container.resolve(RequestLogger);\n  const logger2 = container.resolve(RequestLogger);\n  console.log(`Same instance? ${logger1.getRequestId() === logger2.getRequestId()}`); // false\n  await handler.handle('/data', logger1);\n  console.log();\n\n  // Example 5: Lifecycle Methods\n  console.log('--- Example 5: Service Lifecycle ---\\n');\n  const cache = container.resolve(CacheService);\n  (cache as any).onInit?.();\n  const cachedData = container.resolve(CachedDataService);\n  console.log('First call:', cachedData.getData('user:1'));\n  console.log('Second call (cached):', cachedData.getData('user:1'));\n  console.log('New data:', cachedData.getData('user:2'));\n  (cache as any).onDestroy?.();\n  console.log();\n\n  // Example 6: Composite Services\n  console.log('--- Example 6: Composite Services ---\\n');\n  const secureApi = container.resolve(SecureApiService);\n  try {\n    await secureApi.secureCall('/protected', 'admin', 'password');\n  } catch (error) {\n    console.log('Error:', (error as Error).message);\n  }\n  console.log();\n\n  // Example 7: Telemetry\n  console.log('--- Example 7: Telemetry and Event Monitoring ---\\n');\n  const processor = container.resolve(PaymentProcessor);\n  await processor.processPayment(49.99);\n  console.log();\n\n  console.log('='.repeat(70));\n  console.log('All examples completed successfully!');\n  console.log('='.repeat(70));\n}\n\n// Run examples if this file is executed directly\nif (import.meta.main) {\n  runAdvancedExamples();\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/examples/packages/basic/index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":56,"column":19,"messageId":"unexpectedAny","endLine":56,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1808,1811],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1808,1811],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":74,"column":20,"messageId":"unexpectedAny","endLine":74,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2242,2245],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2242,2245],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * di-framework Demo\n *\n * This demonstrates how the DI framework simplifies service management\n * compared to the manual approach shown in SAMPLE.ts\n */\n\nimport { useContainer } from '@di-framework/di-framework/container';\nimport { ApplicationContext } from '../services/ApplicationContext';\n\nconsole.log('='.repeat(60));\nconsole.log('di-framework Demo');\nconsole.log('='.repeat(60));\nconsole.log();\n\n// Get the global DI container\n// All @Container decorated classes are automatically registered\nconst container = useContainer();\n\nconsole.log('Registered services:', container.getServiceNames());\nconsole.log();\n\n// Resolve services - dependencies are automatically injected\nconsole.log('--- Resolving ApplicationContext (with all dependencies) ---');\nconst appContext = container.resolve<ApplicationContext>(ApplicationContext);\nconsole.log();\n\n// Use the application context\nconsole.log('--- Using the application context ---');\nappContext.db.connect();\nappContext.logger.log('Application started');\nconsole.log();\n\n// Create a user\nconsole.log('--- Creating a user ---');\nconst user = appContext.users.createUser('1', 'John Doe', 'john@example.com');\nconsole.log(`Created user: ${JSON.stringify(user)}`);\nconsole.log();\n\n// Get the user\nconsole.log('--- Retrieving the user ---');\nconst retrievedUser = appContext.users.getUser('1');\nconsole.log(`Retrieved user: ${JSON.stringify(retrievedUser)}`);\nconsole.log();\n\n// Create more users\nconsole.log('--- Creating more users ---');\nappContext.users.createUser('2', 'Jane Smith', 'jane@example.com');\nappContext.users.createUser('3', 'Bob Johnson', 'bob@example.com');\nconsole.log();\n\n// List all users\nconsole.log('--- Listing all users ---');\nconst users = appContext.users.listUsers();\nconsole.log(`Total users: ${users.length}`);\nusers.forEach((u: any) => {\n  console.log(`  - ${u.name} (${u.email})`);\n});\nconsole.log();\n\n// Set environment\nconsole.log('--- Setting environment ---');\nappContext.setEnv({\n  DATABASE_URL: 'postgres://localhost/myapp',\n  LOG_LEVEL: 'debug',\n  API_KEY: 'secret123',\n});\nconsole.log();\n\n// Get logs\nconsole.log('--- Application logs ---');\nconst logs = appContext.logger.getLogs();\nconsole.log(`Total log entries: ${logs.length}`);\nlogs.forEach((log: any) => {\n  console.log(`  ${log}`);\n});\nconsole.log();\n\n// Disconnect\nconsole.log('--- Disconnecting ---');\nappContext.db.disconnect();\nconsole.log();\n\nconsole.log('='.repeat(60));\nconsole.log('Demo complete! The DI framework automatically:');\nconsole.log('  ✓ Registered all @Container services');\nconsole.log('  ✓ Resolved dependencies automatically');\nconsole.log('  ✓ Created singleton instances');\nconsole.log('  ✓ Injected dependencies into constructors');\nconsole.log('='.repeat(60));\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/examples/packages/cf-worker/src/index.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_ensureLogger' is assigned a value but never used.","line":17,"column":7,"messageId":"unusedVar","endLine":17,"endColumn":20,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/examples/packages/cf-worker/src/router.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'badRequest' is defined but never used.","line":22,"column":10,"messageId":"unusedVar","endLine":22,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":37,"column":60,"messageId":"unexpectedAny","endLine":37,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1235,1238],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1235,1238],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ctx' is defined but never used. Allowed unused args must match /^_/u.","line":37,"column":65,"messageId":"unusedVar","endLine":37,"endColumn":68},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":37,"column":70,"messageId":"unexpectedAny","endLine":37,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1245,1248],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1245,1248],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":63,"column":20,"messageId":"unexpectedAny","endLine":63,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2407,2410],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2407,2410],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":115,"column":64,"messageId":"unexpectedAny","endLine":115,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3841,3844],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3841,3844],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":130,"column":26,"messageId":"unexpectedAny","endLine":130,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4260,4263],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4260,4263],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useContainer } from '@di-framework/di-framework/container';\nimport { ConfigService } from './services/ConfigService';\nimport { CounterService } from './services/CounterService';\nimport { LoggerService } from '../../services/LoggerService';\nimport { DatabaseService } from '../../services/DatabaseService';\nimport { UserService } from '../../services/UserService';\n\nconst container = useContainer();\n\nfunction json(data: unknown, init: ResponseInit = {}) {\n  return new Response(JSON.stringify(data, null, 2), {\n    status: 200,\n    headers: { 'content-type': 'application/json; charset=utf-8' },\n    ...init,\n  });\n}\n\nfunction notFound(message = 'Not found') {\n  return json({ error: message }, { status: 404 });\n}\n\nfunction badRequest(message = 'Bad request') {\n  return json({ error: message }, { status: 400 });\n}\n\nfunction html(body: string, init: ResponseInit = {}) {\n  return new Response(body, {\n    headers: { 'content-type': 'text/html; charset=utf-8' },\n    ...init,\n  });\n}\n\nfunction header(title: string) {\n  return `<header style=\"margin-bottom:1rem\"><h1>${title}</h1><p>Built with a lightweight DI container (decorators + auto-wiring)</p></header>`;\n}\n\nexport async function handleRequest(request: Request, env: any, ctx: any) {\n  const url = new URL(request.url);\n  const path = url.pathname;\n\n  // Useful services resolved via DI\n  const logger = container.resolve<LoggerService>(LoggerService);\n  const config = container.resolve<ConfigService>(ConfigService);\n  const users = container.resolve<UserService>(UserService);\n  const db = container.resolve<DatabaseService>(DatabaseService);\n  const counter = container.resolve<CounterService>(CounterService);\n\n  // Simple HTML index\n  if (path === '/') {\n    const services = container.getServiceNames().sort();\n    const body = `\n      ${header('DI Worker Example')}\n      <main>\n        <p>Try these routes:</p>\n        <ul>\n          <li><a href=\"/api/info\">GET /api/info</a></li>\n          <li><a href=\"/api/logs\">GET /api/logs</a></li>\n          <li><a href=\"/api/users\">GET /api/users</a></li>\n          <li><a href=\"/api/users?id=1&name=Jane&email=jane%40example.com\">GET /api/users?id=...&name=...&email=...</a></li>\n          <li><a href=\"/api/count\">GET /api/count</a></li>\n        </ul>\n        <pre style=\"background:#111;color:#eee;padding:0.75rem;border-radius:6px;\">Registered services:\\n${services\n          .map((s: any) => `- ${s}`)\n          .join('\\n')}</pre>\n      </main>\n    `;\n    return html(body);\n  }\n\n  // Info: shows token-based injection + container insight\n  if (path === '/api/info' && request.method === 'GET') {\n    logger.log('/api/info called');\n    const info = config.info(env);\n    return json({\n      info,\n      services: container.getServiceNames().sort(),\n      durableObjectName: 'MY_DURABLE_OBJECT',\n    });\n  }\n\n  if (path === '/api/logs' && request.method === 'GET') {\n    return json({ logs: logger.getLogs() });\n  }\n\n  if (path.startsWith('/api/users') && request.method === 'GET') {\n    // Ensure our fake DB is connected once\n    if (!db.isConnected()) db.connect();\n\n    const id = url.searchParams.get('id');\n    const name = url.searchParams.get('name');\n    const email = url.searchParams.get('email');\n\n    if (id && name && email) {\n      const user = users.createUser(id, name, email);\n      return json({ created: user });\n    }\n\n    if (id) {\n      const user = users.getUser(id);\n      if (!user) return notFound('User not found');\n      return json({ user });\n    }\n\n    return json({ users: users.listUsers() });\n  }\n\n  if (path === '/api/count' && request.method === 'GET') {\n    const value = await counter.get(env);\n    return json({ value });\n  }\n\n  if (path === '/api/count' && request.method === 'POST') {\n    let delta = 1;\n    try {\n      const body = (await request.json().catch(() => ({}))) as any;\n      if (typeof body?.delta === 'number') delta = body.delta;\n    } catch {\n      // ignore\n    }\n    const value = await counter.increment(env, delta);\n    return json({ value });\n  }\n\n  if (path === '/api/count/reset' && request.method === 'POST') {\n    const value = await counter.reset(env);\n    return json({ value });\n  }\n\n  if (path === '/api/hello' && request.method === 'GET') {\n    const stub = (env as any).MY_DURABLE_OBJECT.getByName('counter');\n    const greeting = await stub.sayHello('world');\n    return json({ greeting });\n  }\n\n  return notFound();\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/examples/packages/cf-worker/src/services/ConfigService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":7,"column":13,"messageId":"unexpectedAny","endLine":7,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[208,211],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[208,211],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":10,"column":41,"messageId":"unexpectedAny","endLine":10,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[297,300],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[297,300],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":34,"messageId":"unexpectedAny","endLine":11,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[356,359],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[356,359],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Container, Component } from '@di-framework/di-framework/decorators';\n\n@Container()\nexport class ConfigService {\n  constructor(@Component('APP_NAME') private readonly appName: string) {}\n\n  info(env: any) {\n    return {\n      appName: this.appName,\n      hasDurableObject: Boolean((env as any)?.MY_DURABLE_OBJECT),\n      compatibilityDate: (env as any)?.__STATIC_CONTENT_MANIFEST ? undefined : undefined,\n    };\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/examples/packages/cf-worker/src/services/CounterService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":8,"column":24,"messageId":"unexpectedAny","endLine":8,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[294,297],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[294,297],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":9,"column":20,"messageId":"unexpectedAny","endLine":9,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[320,323],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[320,323],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":24,"messageId":"unexpectedAny","endLine":12,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[393,396],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[393,396],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":18,"messageId":"unexpectedAny","endLine":18,"endColumn":21,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[576,579],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[576,579],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":24,"column":20,"messageId":"unexpectedAny","endLine":24,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[728,731],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[728,731],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Container, Component } from '@di-framework/di-framework/decorators';\nimport { LoggerService } from '../../../services/LoggerService';\n\n@Container()\nexport class CounterService {\n  constructor(@Component(LoggerService) private readonly logger: LoggerService) {}\n\n  private getStub(env: any) {\n    return (env as any).MY_DURABLE_OBJECT.getByName('counter');\n  }\n\n  async increment(env: any, delta = 1) {\n    const next = await this.getStub(env).increment(delta);\n    this.logger.log(`Counter incremented by ${delta} -> ${next}`);\n    return next;\n  }\n\n  async get(env: any) {\n    const value = await this.getStub(env).getCount();\n    this.logger.log(`Counter read -> ${value}`);\n    return value;\n  }\n\n  async reset(env: any) {\n    const value = await this.getStub(env).reset();\n    this.logger.log(`Counter reset -> ${value}`);\n    return value;\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/examples/packages/deno-http/src/main.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Json' is defined but never used.","line":13,"column":8,"messageId":"unusedVar","endLine":13,"endColumn":12,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Json"},"fix":{"range":[204,217],"text":""},"desc":"Remove unused variable \"Json\"."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"The `{}` (\"empty object\") type allows any non-nullish value, including literals like `0` and `\"\"`.\n- If that's what you want, disable this lint rule with an inline comment or configure the 'allowObjectTypes' rule option.\n- If you want a type meaning \"any object\", you probably want `object` instead.\n- If you want a type meaning \"any value\", you probably want `unknown` instead.","line":75,"column":12,"messageId":"noEmptyObject","endLine":75,"endColumn":14,"suggestions":[{"messageId":"replaceEmptyObjectType","data":{"replacement":"object"},"fix":{"range":[1840,1842],"text":"object"},"desc":"Replace `{}` with `object`."},{"messageId":"replaceEmptyObjectType","data":{"replacement":"unknown"},"fix":{"range":[1840,1842],"text":"unknown"},"desc":"Replace `{}` with `unknown`."}]},{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"The `{}` (\"empty object\") type allows any non-nullish value, including literals like `0` and `\"\"`.\n- If that's what you want, disable this lint rule with an inline comment or configure the 'allowObjectTypes' rule option.\n- If you want a type meaning \"any object\", you probably want `object` instead.\n- If you want a type meaning \"any value\", you probably want `unknown` instead.","line":76,"column":25,"messageId":"noEmptyObject","endLine":76,"endColumn":27,"suggestions":[{"messageId":"replaceEmptyObjectType","data":{"replacement":"object"},"fix":{"range":[1868,1870],"text":"object"},"desc":"Replace `{}` with `object`."},{"messageId":"replaceEmptyObjectType","data":{"replacement":"unknown"},"fix":{"range":[1868,1870],"text":"unknown"},"desc":"Replace `{}` with `unknown`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  Container,\n  Component,\n  Telemetry,\n  getInjectionContainer,\n} from '@di-framework/di-framework/decorators';\nimport {\n  TypedRouter,\n  json,\n  Endpoint,\n  type RequestSpec,\n  type ResponseSpec,\n  type Json,\n} from '@di-framework/di-framework-http';\n\nconst data = {\n  subjects: [\n    'You',\n    'The version of you they approved',\n    'The man staring back from the mirror',\n    'The consumer they built you to be',\n    'Your fear of being nobody',\n    'The life you keep postponing',\n    'The animal underneath the resume',\n  ],\n  verbs: [\n    'is chasing',\n    'is addicted to',\n    'is hiding behind',\n    'is slowly becoming',\n    'is terrified of losing',\n    'mistakes for freedom',\n    'calls success',\n  ],\n  objects: [\n    'a life that was never yours',\n    'approval from strangers',\n    'a job that owns your time',\n    \"things you don't need\",\n    'a story someone else wrote',\n    'comfort dressed up as purpose',\n    'a cage with better lighting',\n  ],\n  modifiers: [\n    'and wonders why it feels empty',\n    'while calling it progress',\n    'because silence feels dangerous',\n    'so you never have to be alone with yourself',\n    'and you know it',\n    'but you keep buying anyway',\n    \"and that's the joke\",\n  ],\n};\n\nfunction pick<T>(arr: T[]): T {\n  return arr[Math.floor(Math.random() * arr.length)] as T;\n}\n\nfunction capitalize(str: string): string {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n@Container()\nclass NaturalLanguageService {\n  @Telemetry({ logging: true })\n  getText(sentenceCount: number): string {\n    return Array.from({ length: sentenceCount }, () => {\n      const sentence = `${pick(data.subjects)} ${pick(data.verbs)} ${pick(data.objects)} ${pick(data.modifiers)}.`;\n      return capitalize(sentence);\n    }).join(' ');\n  }\n}\n\n// Types of stuff supplied to router\ntype Env = {};\ntype ExecutionContext = {};\n\nexport const router = TypedRouter<[Env, ExecutionContext]>();\n\n// Response Types\ntype SentencesResponse = { nonsense: string; count: number };\ntype SentenceResponse = { nonsense: string };\n\n// Denosaur LLM\n@Container()\nexport class NaturalLanguageController {\n  @Component(NaturalLanguageService)\n  private service!: NaturalLanguageService;\n\n  @Endpoint({\n    summary: 'Get random nonsense',\n    responses: { '200': { description: 'Nonsense sentences' } },\n  })\n  static getRoot = router.get<RequestSpec<void>, ResponseSpec<SentenceResponse>>('/', () => {\n    const ctrl = getInjectionContainer().resolve(NaturalLanguageController);\n    return json({ nonsense: ctrl.service.getText(5) });\n  });\n\n  @Endpoint({\n    summary: 'Get N nonsense sentences',\n    responses: { '200': { description: 'Nonsense sentences with count' } },\n  })\n  static getCount = router.get<RequestSpec<void>, ResponseSpec<SentencesResponse>>(\n    '/:count',\n    (req) => {\n      const ctrl = getInjectionContainer().resolve(NaturalLanguageController);\n      const count = parseInt(req.params.count as string) || 5;\n      return json({ nonsense: ctrl.service.getText(count), count });\n    },\n  );\n}\n\nif (import.meta.main) {\n  Deno.serve({ port: 8000 }, router.fetch);\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/examples/packages/deno-http/src/test.main.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":11,"column":38,"messageId":"unexpectedAny","endLine":11,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[346,349],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[346,349],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":38,"messageId":"unexpectedAny","endLine":20,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[734,737],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[734,737],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":29,"column":38,"messageId":"unexpectedAny","endLine":29,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1103,1106],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1103,1106],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// @deno-types=\"./\"\nimport { assertEquals } from '@std/assert';\nimport { router } from './main';\n\nconst env = {};\nconst ctx = {};\n\nDeno.test('GET / returns nonsense with 5 sentences', async () => {\n  const res = await router.fetch(new Request('http://localhost/'), ctx, env);\n  assertEquals(res.status, 200);\n  const body = (await res.json()) as any;\n  assertEquals(typeof body.nonsense, 'string');\n  const sentences = body.nonsense.split('. ').filter(Boolean);\n  assertEquals(sentences.length, 5);\n});\n\nDeno.test('GET /:count returns the requested number of sentences', async () => {\n  const res = await router.fetch(new Request('http://localhost/3'), ctx, env);\n  assertEquals(res.status, 200);\n  const body = (await res.json()) as any;\n  assertEquals(body.count, 3);\n  const sentences = body.nonsense.split('. ').filter(Boolean);\n  assertEquals(sentences.length, 3);\n});\n\nDeno.test('GET /:count falls back to 5 for non-numeric input', async () => {\n  const res = await router.fetch(new Request('http://localhost/abc'), ctx, env);\n  assertEquals(res.status, 200);\n  const body = (await res.json()) as any;\n  assertEquals(body.count, 5);\n  const sentences = body.nonsense.split('. ').filter(Boolean);\n  assertEquals(sentences.length, 5);\n});\n\nDeno.test('GET / returns JSON content-type', async () => {\n  const res = await router.fetch(new Request('http://localhost/'), ctx, env);\n  assertEquals(res.headers.get('content-type'), 'application/json; charset=utf-8');\n});\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/examples/packages/http-router/index.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":52,"column":34,"messageId":"unexpectedAny","endLine":52,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1621,1624],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1621,1624],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":52,"column":44,"messageId":"unexpectedAny","endLine":52,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1631,1634],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1631,1634],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\n  TypedRouter,\n  json,\n  type RequestSpec,\n  type ResponseSpec,\n  type Json,\n  Controller,\n  Endpoint,\n} from '@di-framework/di-framework-http';\nimport { Component } from '@di-framework/di-framework/decorators';\nimport { useContainer } from '@di-framework/di-framework/container';\nimport { LoggerService } from '../services/LoggerService';\n\nconst router = TypedRouter();\n\ntype EchoPayload = { message: string };\ntype EchoResponse = { echoed: string; timestamp: string };\n\n@Controller()\nexport class EchoController {\n  // Because @Controller composes the core @Container decorator, this class is\n  // automatically registered with the DI container. We can inject services.\n  @Component(LoggerService)\n  private logger!: LoggerService;\n\n  echoMessage(message: string): EchoResponse {\n    this.logger.log(`Echoing: ${message}`);\n    return { echoed: message, timestamp: new Date().toISOString() };\n  }\n\n  @Endpoint({\n    summary: 'Echo a message',\n    description: 'Returns the provided message with a server timestamp.',\n    responses: {\n      '200': { description: 'Successful echo' },\n    },\n  })\n  static post = router.post<RequestSpec<Json<EchoPayload>>, ResponseSpec<EchoResponse>>(\n    '/echo',\n    (req) => {\n      // Demonstrate auto DI registration: resolve the controller instance from\n      // the global container without any manual registration.\n      const controller = useContainer().resolve(EchoController);\n      return json(controller.echoMessage(req.content.message));\n    },\n  );\n}\n\nrouter.get('/', () => json({ message: 'API is healthy' }));\n\nexport default {\n  fetch: (request: Request, env: any, ctx: any) => router.fetch(request, env, ctx),\n};\nexport { router };\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/examples/packages/services/ApplicationContext.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":31,"messageId":"unexpectedAny","endLine":15,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[477,480],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[477,480],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":29,"messageId":"unexpectedAny","endLine":16,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[516,519],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[516,519],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":30,"column":30,"messageId":"unexpectedAny","endLine":30,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[943,946],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[943,946],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":35,"column":28,"messageId":"unexpectedAny","endLine":35,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1134,1137],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1134,1137],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":36,"column":19,"messageId":"unexpectedAny","endLine":36,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1182,1185],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1182,1185],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":38,"column":31,"messageId":"unexpectedAny","endLine":38,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1236,1239],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1236,1239],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":39,"column":22,"messageId":"unexpectedAny","endLine":39,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1287,1290],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1287,1290],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":47,"column":15,"messageId":"unexpectedAny","endLine":47,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1405,1408],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1405,1408],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":52,"column":28,"messageId":"unexpectedAny","endLine":52,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1557,1560],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1557,1560],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":53,"column":19,"messageId":"unexpectedAny","endLine":53,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1605,1608],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1605,1608],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":55,"column":31,"messageId":"unexpectedAny","endLine":55,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1659,1662],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1659,1662],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":56,"column":22,"messageId":"unexpectedAny","endLine":56,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1710,1713],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1710,1713],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":63,"column":28,"messageId":"unexpectedAny","endLine":63,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1811,1814],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1811,1814],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":70,"column":13,"messageId":"unexpectedAny","endLine":70,"endColumn":16,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1914,1917],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1914,1917],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Example Application Context\n *\n * Demonstrates a complex service with multiple dependencies\n * Similar to the SAMPLE.ts ApplicationContext but using DI framework\n */\n\nimport { Container, Component } from '@di-framework/di-framework/decorators';\nimport { DatabaseService } from './DatabaseService';\nimport { UserService } from './UserService';\nimport { LoggerService } from './LoggerService';\n\n@Container()\nexport class ApplicationContext {\n  private env: Record<string, any> = {};\n  private executionContext: any = null;\n\n  constructor(\n    @Component(DatabaseService) public readonly db: DatabaseService,\n    @Component(UserService) public readonly users: UserService,\n    @Component(LoggerService) public readonly logger: LoggerService,\n  ) {\n    console.log('[ApplicationContext] Created with all dependencies');\n  }\n\n  /**\n   * Initialize environment variables\n   * Similar to setEnv in SAMPLE.ts\n   */\n  setEnv(env: Record<string, any>): void {\n    this.env = env;\n    this.logger.log(`Environment initialized: ${JSON.stringify(Object.keys(env))}`);\n\n    // Initialize services with environment\n    if (typeof (this.db as any).setEnv === 'function') {\n      (this.db as any).setEnv(env);\n    }\n    if (typeof (this.users as any).setEnv === 'function') {\n      (this.users as any).setEnv(env);\n    }\n  }\n\n  /**\n   * Set execution context\n   * Similar to setCtx in SAMPLE.ts\n   */\n  setCtx(ctx: any): void {\n    this.executionContext = ctx;\n    this.logger.log('Execution context set');\n\n    // Pass context to services\n    if (typeof (this.db as any).setCtx === 'function') {\n      (this.db as any).setCtx(ctx);\n    }\n    if (typeof (this.users as any).setCtx === 'function') {\n      (this.users as any).setCtx(ctx);\n    }\n  }\n\n  /**\n   * Get the current environment\n   */\n  getEnv(): Record<string, any> {\n    return { ...this.env };\n  }\n\n  /**\n   * Get the current execution context\n   */\n  getCtx(): any {\n    return this.executionContext;\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/examples/packages/services/DatabaseService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":31,"column":23,"messageId":"unexpectedAny","endLine":31,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[618,621],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[618,621],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Example Database Service\n *\n * Demonstrates a simple injectable service\n */\n\nimport { Container } from '@di-framework/di-framework/decorators';\n\n@Container()\nexport class DatabaseService {\n  private connected: boolean = false;\n\n  constructor() {\n    console.log('[DatabaseService] Created');\n  }\n\n  connect(): void {\n    this.connected = true;\n    console.log('[DatabaseService] Connected to database');\n  }\n\n  disconnect(): void {\n    this.connected = false;\n    console.log('[DatabaseService] Disconnected from database');\n  }\n\n  isConnected(): boolean {\n    return this.connected;\n  }\n\n  query(sql: string): any {\n    if (!this.connected) {\n      throw new Error('Database not connected');\n    }\n    console.log(`[DatabaseService] Executing query: ${sql}`);\n    return { success: true };\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/examples/packages/services/LoggerService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":22,"messageId":"unexpectedAny","endLine":18,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[377,380],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[377,380],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Example Logger Service\n *\n * Demonstrates a simple injectable service with lifecycle methods\n */\n\nimport { Container, TelemetryListener } from '@di-framework/di-framework/decorators';\n\n@Container()\nexport class LoggerService {\n  private logs: string[] = [];\n\n  constructor() {\n    console.log('[LoggerService] Created');\n  }\n\n  @TelemetryListener()\n  onTelemetry(event: any): void {\n    const { className, methodName, startTime, endTime, error } = event;\n    const duration = endTime ? (endTime - startTime).toFixed(2) : 'N/A';\n    const status = error ? `FAILED (${error.message})` : 'SUCCESS';\n    this.log(`[Telemetry] ${className}.${methodName} - ${status} (${duration}ms)`);\n  }\n\n  log(message: string): void {\n    const timestamp = new Date().toISOString();\n    const logEntry = `[${timestamp}] ${message}`;\n    this.logs.push(logEntry);\n    console.log(`[LoggerService] ${logEntry}`);\n  }\n\n  error(message: string): void {\n    const timestamp = new Date().toISOString();\n    const logEntry = `[${timestamp}] ERROR: ${message}`;\n    this.logs.push(logEntry);\n    console.error(`[LoggerService] ${logEntry}`);\n  }\n\n  getLogs(): string[] {\n    return [...this.logs];\n  }\n\n  clearLogs(): void {\n    this.logs = [];\n    console.log('[LoggerService] Logs cleared');\n  }\n}\n","usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/examples/packages/services/UserService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"/Users/williamseemueller/workspace/di-framework/packages/examples/packages/test-example/test-example.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DIContainer' is defined but never used.","line":7,"column":23,"messageId":"unusedVar","endLine":7,"endColumn":34,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"DIContainer"},"fix":{"range":[106,187],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'body' is defined but never used. Allowed unused args must match /^_/u.","line":20,"column":43,"messageId":"unusedVar","endLine":20,"endColumn":47},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":96,"column":26,"messageId":"unexpectedAny","endLine":96,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2923,2926],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2923,2926],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":141,"column":43,"messageId":"unexpectedAny","endLine":141,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4308,4311],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4308,4311],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":151,"column":49,"messageId":"unexpectedAny","endLine":151,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4655,4658],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4655,4658],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":197,"column":42,"messageId":"unexpectedAny","endLine":197,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6587,6590],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6587,6590],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":202,"column":42,"messageId":"unexpectedAny","endLine":202,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6781,6784],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6781,6784],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":213,"column":45,"messageId":"unexpectedAny","endLine":213,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7249,7252],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7249,7252],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":220,"column":48,"messageId":"unexpectedAny","endLine":220,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7485,7488],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7485,7488],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":221,"column":48,"messageId":"unexpectedAny","endLine":221,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7551,7554],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7551,7554],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":236,"column":45,"messageId":"unexpectedAny","endLine":236,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7977,7980],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7977,7980],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\n * Testing Examples for the DI Framework\n *\n * Shows how to write tests with mocked dependencies\n */\n\nimport { Container as DIContainer } from '@di-framework/di-framework/container';\nimport { Container, Component } from '@di-framework/di-framework/decorators';\n\n// ============================================================================\n// Service Definitions\n// ============================================================================\n\ninterface IEmailService {\n  send(to: string, subject: string, body: string): Promise<void>;\n}\n\n@Container()\nclass RealEmailService implements IEmailService {\n  async send(to: string, subject: string, body: string): Promise<void> {\n    console.log(`[REAL] Sending email to ${to}: ${subject}`);\n    // Real implementation would use SMTP or email API\n    return Promise.resolve();\n  }\n}\n\n@Container()\nclass UserService {\n  constructor(@Component(RealEmailService) private emailService: IEmailService) {}\n\n  async registerUser(email: string, name: string): Promise<void> {\n    console.log(`Registering user: ${name} (${email})`);\n    await this.emailService.send(email, 'Welcome!', `Hello ${name}, welcome to our service!`);\n  }\n\n  async notifyUser(email: string, message: string): Promise<void> {\n    await this.emailService.send(email, 'Notification', message);\n  }\n}\n\n// ============================================================================\n// Mock Implementations for Testing\n// ============================================================================\n\nclass MockEmailService implements IEmailService {\n  sentEmails: Array<{ to: string; subject: string; body: string }> = [];\n\n  async send(to: string, subject: string, body: string): Promise<void> {\n    console.log(`[MOCK] Email sent to ${to}: ${subject}`);\n    this.sentEmails.push({ to, subject, body });\n  }\n\n  getSentEmails() {\n    return this.sentEmails;\n  }\n\n  clearSentEmails() {\n    this.sentEmails = [];\n  }\n}\n\n// ============================================================================\n// Test Suite Examples\n// ============================================================================\n\nclass TestRunner {\n  private passed = 0;\n  private failed = 0;\n  private errors: Error[] = [];\n\n  async test(name: string, fn: () => Promise<void>): Promise<void> {\n    try {\n      await fn();\n      console.log(`✓ ${name}`);\n      this.passed++;\n    } catch (error) {\n      console.log(`✗ ${name}`);\n      console.log(`  Error: ${(error as Error).message}`);\n      this.failed++;\n      this.errors.push(error as Error);\n    }\n  }\n\n  assert(condition: boolean, message: string): void {\n    if (!condition) {\n      throw new Error(`Assertion failed: ${message}`);\n    }\n  }\n\n  assertEqual<T>(actual: T, expected: T, message: string): void {\n    if (actual !== expected) {\n      throw new Error(`Assertion failed: ${message}\\n  Expected: ${expected}\\n  Actual: ${actual}`);\n    }\n  }\n\n  assertArrayLength(arr: any[], length: number, message: string): void {\n    if (arr.length !== length) {\n      throw new Error(\n        `Assertion failed: ${message}\\n  Expected length: ${length}\\n  Actual length: ${arr.length}`,\n      );\n    }\n  }\n\n  getResults(): { passed: number; failed: number; total: number } {\n    return {\n      passed: this.passed,\n      failed: this.failed,\n      total: this.passed + this.failed,\n    };\n  }\n\n  printSummary(): void {\n    const results = this.getResults();\n    console.log('\\n' + '='.repeat(60));\n    console.log('Test Results');\n    console.log('='.repeat(60));\n    console.log(`Passed: ${results.passed}`);\n    console.log(`Failed: ${results.failed}`);\n    console.log(`Total: ${results.total}`);\n    if (this.failed > 0) {\n      console.log('\\nErrors:');\n      this.errors.forEach((error) => {\n        console.log(`  - ${error.message}`);\n      });\n    }\n    console.log('='.repeat(60));\n  }\n}\n\n// ============================================================================\n// Test Suites\n// ============================================================================\n\nasync function testUserServiceWithMocks(): Promise<void> {\n  console.log('\\nTest Suite: UserService with Mocked Email Service');\n  console.log('-'.repeat(60));\n\n  const runner = new TestRunner();\n\n  // Create test container with mocked dependencies\n  const testContainer = new (Container as any)();\n  const mockEmailService = new MockEmailService();\n\n  // Register mock instead of real service\n  testContainer.registerFactory('RealEmailService', () => mockEmailService, {\n    singleton: true,\n  });\n  testContainer.register(UserService);\n\n  // Resolve service (will use mock email service)\n  const userService = (testContainer.resolve as any)(UserService);\n\n  await runner.test('Should register user and send welcome email', async () => {\n    mockEmailService.clearSentEmails();\n    await userService.registerUser('john@example.com', 'John Doe');\n\n    runner.assertArrayLength(mockEmailService.getSentEmails(), 1, 'Should send exactly 1 email');\n\n    const email = mockEmailService.getSentEmails()[0]!;\n    runner.assertEqual(email.to, 'john@example.com', 'Email should go to user');\n    runner.assertEqual(email.subject, 'Welcome!', 'Subject should be Welcome!');\n    runner.assert(email.body.includes('John Doe'), 'Body should include user name');\n  });\n\n  await runner.test('Should notify user', async () => {\n    mockEmailService.clearSentEmails();\n    await userService.notifyUser('jane@example.com', 'Your order has shipped');\n\n    runner.assertArrayLength(mockEmailService.getSentEmails(), 1, 'Should send exactly 1 email');\n\n    const email = mockEmailService.getSentEmails()[0]!;\n    runner.assertEqual(email.to, 'jane@example.com', 'Email should go to correct user');\n    runner.assertEqual(email.subject, 'Notification', 'Subject should be Notification');\n  });\n\n  await runner.test('Should handle multiple notifications', async () => {\n    mockEmailService.clearSentEmails();\n\n    await userService.notifyUser('user1@example.com', 'Message 1');\n    await userService.notifyUser('user2@example.com', 'Message 2');\n    await userService.notifyUser('user3@example.com', 'Message 3');\n\n    runner.assertArrayLength(mockEmailService.getSentEmails(), 3, 'Should send 3 emails');\n  });\n\n  runner.printSummary();\n}\n\nasync function testContainerIsolation(): Promise<void> {\n  console.log('\\nTest Suite: Container Isolation');\n  console.log('-'.repeat(60));\n\n  const runner = new TestRunner();\n\n  // Test 1: Each container has its own instance\n  await runner.test('Each container should have isolated instances', async () => {\n    const container1 = new (Container as any)();\n    const mockEmail1 = new MockEmailService();\n    container1.registerFactory('email', () => mockEmail1);\n    container1.register(UserService);\n\n    const container2 = new (Container as any)();\n    const mockEmail2 = new MockEmailService();\n    container2.registerFactory('email', () => mockEmail2);\n    container2.register(UserService);\n\n    runner.assert(mockEmail1 !== mockEmail2, 'Mocks should be different instances');\n    console.log('Containers are properly isolated ✓');\n  });\n\n  // Test 2: Singleton within container\n  await runner.test('Singleton services should return same instance', async () => {\n    const testContainer = new (Container as any)();\n    const mockEmail = new MockEmailService();\n    testContainer.registerFactory('email', () => mockEmail, {\n      singleton: true,\n    });\n    testContainer.register(UserService);\n\n    const service1 = (testContainer.resolve as any)(UserService);\n    const service2 = (testContainer.resolve as any)(UserService);\n\n    runner.assert(service1 === service2, 'Should return same singleton instance');\n  });\n\n  runner.printSummary();\n}\n\nasync function testErrorScenarios(): Promise<void> {\n  console.log('\\nTest Suite: Error Scenarios');\n  console.log('-'.repeat(60));\n\n  const runner = new TestRunner();\n\n  await runner.test('Should throw for unregistered service', async () => {\n    const testContainer = new (Container as any)();\n\n    try {\n      testContainer.resolve('NonExistentService');\n      throw new Error('Should have thrown ServiceNotFoundError');\n    } catch (error) {\n      runner.assert(\n        (error as Error).message.includes('not registered'),\n        'Should have proper error message',\n      );\n    }\n  });\n\n  runner.printSummary();\n}\n\n// ============================================================================\n// Run All Tests\n// ============================================================================\n\nexport async function runAllTests(): Promise<void> {\n  console.log('='.repeat(60));\n  console.log('DI Framework Test Suite');\n  console.log('='.repeat(60));\n\n  await testUserServiceWithMocks();\n  await testContainerIsolation();\n  await testErrorScenarios();\n\n  console.log('\\n' + '='.repeat(60));\n  console.log('All test suites completed!');\n  console.log('='.repeat(60));\n}\n\n// Run tests if executed directly\nif (import.meta.main) {\n  runAllTests();\n}\n","usedDeprecatedRules":[]}]
